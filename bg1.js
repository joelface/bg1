var Jr=Object.defineProperty;var Ft=e=>{throw TypeError(e)};var Xr=(e,t,n)=>t in e?Jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var P=(e,t,n)=>Xr(e,typeof t!="symbol"?t+"":t,n),zt=(e,t,n)=>t.has(e)||Ft("Cannot "+n);var tt=(e,t,n)=>(zt(e,t,"read from private field"),n?n.call(e):t.get(e)),nt=(e,t,n)=>t.has(e)?Ft("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ht=(e,t,n,i)=>(zt(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);var Ce,C,Mn,he,Wt,$n,ht,kt,mt,pt,On,Ie={},Bn=[],Zr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ve=Array.isArray;function ne(e,t){for(var n in t)e[n]=t[n];return e}function Gn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ee(e,t,n){var i,s,o,c={};for(o in t)o=="key"?i=t[o]:o=="ref"?s=t[o]:c[o]=t[o];if(arguments.length>2&&(c.children=arguments.length>3?Ce.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)c[o]===void 0&&(c[o]=e.defaultProps[o]);return Te(e,c,i,s,null)}function Te(e,t,n,i,s){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Mn,__i:-1,__u:0};return s==null&&C.vnode!=null&&C.vnode(o),o}function x(e){return e.children}function ie(e,t){this.props=e,this.context=t}function we(e,t){if(t==null)return e.__?we(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?we(e):null}function Un(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Un(e)}}function ft(e){(!e.__d&&(e.__d=!0)&&he.push(e)&&!je.__r++||Wt!==C.debounceRendering)&&((Wt=C.debounceRendering)||$n)(je)}function je(){var e,t,n,i,s,o,c,a;for(he.sort(ht);e=he.shift();)e.__d&&(t=he.length,i=void 0,o=(s=(n=e).__v).__e,c=[],a=[],n.__P&&((i=ne({},s)).__v=s.__v+1,C.vnode&&C.vnode(i),Tt(n.__P,i,s,n.__n,n.__P.namespaceURI,32&s.__u?[o]:null,c,o??we(s),!!(32&s.__u),a),i.__v=s.__v,i.__.__k[i.__i]=i,Hn(c,i,a),i.__e!=o&&Un(i)),he.length>t&&he.sort(ht));je.__r=0}function Fn(e,t,n,i,s,o,c,a,l,d,h){var u,p,m,f,g,k=i&&i.__k||Bn,I=t.length;for(n.__d=l,ei(n,t,k),l=n.__d,u=0;u<I;u++)(m=n.__k[u])!=null&&(p=m.__i===-1?Ie:k[m.__i]||Ie,m.__i=u,Tt(e,m,p,s,o,c,a,l,d,h),f=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&Nt(p.ref,null,m),h.push(m.ref,m.__c||f,m)),g==null&&f!=null&&(g=f),65536&m.__u||p.__k===m.__k?l=zn(m,l,e):typeof m.type=="function"&&m.__d!==void 0?l=m.__d:f&&(l=f.nextSibling),m.__d=void 0,m.__u&=-196609);n.__d=l,n.__e=g}function ei(e,t,n){var i,s,o,c,a,l=t.length,d=n.length,h=d,u=0;for(e.__k=[],i=0;i<l;i++)(s=t[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(c=i+u,(s=e.__k[i]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Te(null,s,null,null,null):Ve(s)?Te(x,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?Te(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,o=null,(a=s.__i=ti(s,n,c,h))!==-1&&(h--,(o=n[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&u--,typeof s.type!="function"&&(s.__u|=65536)):a!==c&&(a==c-1?u--:a==c+1?u++:(a>c?u--:u++,s.__u|=65536))):s=e.__k[i]=null;if(h)for(i=0;i<d;i++)(o=n[i])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=we(o)),Wn(o,o))}function zn(e,t,n){var i,s;if(typeof e.type=="function"){for(i=e.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=e,t=zn(i[s],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=we(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function se(e,t){return t=t||[],e==null||typeof e=="boolean"||(Ve(e)?e.some(function(n){se(n,t)}):t.push(e)),t}function ti(e,t,n,i){var s=e.key,o=e.type,c=n-1,a=n+1,l=t[n];if(l===null||l&&s==l.key&&o===l.type&&!(131072&l.__u))return n;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;c>=0||a<t.length;){if(c>=0){if((l=t[c])&&!(131072&l.__u)&&s==l.key&&o===l.type)return c;c--}if(a<t.length){if((l=t[a])&&!(131072&l.__u)&&s==l.key&&o===l.type)return a;a++}}return-1}function jt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Zr.test(t)?n:n+"px"}function Be(e,t,n,i,s){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||jt(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||jt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=kt,e.addEventListener(t,o?pt:mt,o)):e.removeEventListener(t,o?pt:mt,o);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Yt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=kt++;else if(t.t<n.u)return;return n(C.event?C.event(t):t)}}}function Tt(e,t,n,i,s,o,c,a,l,d){var h,u,p,m,f,g,k,I,N,D,y,T,w,b,_,v,S=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=t.__e=n.__e]),(h=C.__b)&&h(t);e:if(typeof S=="function")try{if(I=t.props,N="prototype"in S&&S.prototype.render,D=(h=S.contextType)&&i[h.__c],y=h?D?D.props.value:h.__:i,n.__c?k=(u=t.__c=n.__c).__=u.__E:(N?t.__c=u=new S(I,y):(t.__c=u=new ie(I,y),u.constructor=S,u.render=ri),D&&D.sub(u),u.props=I,u.state||(u.state={}),u.context=y,u.__n=i,p=u.__d=!0,u.__h=[],u._sb=[]),N&&u.__s==null&&(u.__s=u.state),N&&S.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=ne({},u.__s)),ne(u.__s,S.getDerivedStateFromProps(I,u.__s))),m=u.props,f=u.state,u.__v=t,p)N&&S.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),N&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(N&&S.getDerivedStateFromProps==null&&I!==m&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(I,y),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(I,u.__s,y)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=I,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(O){O&&(O.__=t)}),T=0;T<u._sb.length;T++)u.__h.push(u._sb[T]);u._sb=[],u.__h.length&&c.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(I,u.__s,y),N&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(m,f,g)})}if(u.context=y,u.props=I,u.__P=e,u.__e=!1,w=C.__r,b=0,N){for(u.state=u.__s,u.__d=!1,w&&w(t),h=u.render(u.props,u.state,u.context),_=0;_<u._sb.length;_++)u.__h.push(u._sb[_]);u._sb=[]}else do u.__d=!1,w&&w(t),h=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++b<25);u.state=u.__s,u.getChildContext!=null&&(i=ne(ne({},i),u.getChildContext())),N&&!p&&u.getSnapshotBeforeUpdate!=null&&(g=u.getSnapshotBeforeUpdate(m,f)),Fn(e,Ve(v=h!=null&&h.type===x&&h.key==null?h.props.children:h)?v:[v],t,n,i,s,o,c,a,l,d),u.base=t.__e,t.__u&=-161,u.__h.length&&c.push(u),k&&(u.__E=u.__=null)}catch(O){if(t.__v=null,l||o!=null){for(t.__u|=l?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,t.__e=a}else t.__e=n.__e,t.__k=n.__k;C.__e(O,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ni(n.__e,t,n,i,s,o,c,l,d);(h=C.diffed)&&h(t)}function Hn(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)Nt(n[i],n[++i],n[++i]);C.__c&&C.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(o){o.call(s)})}catch(o){C.__e(o,s.__v)}})}function ni(e,t,n,i,s,o,c,a,l){var d,h,u,p,m,f,g,k=n.props,I=t.props,N=t.type;if(N==="svg"?s="http://www.w3.org/2000/svg":N==="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(d=0;d<o.length;d++)if((m=o[d])&&"setAttribute"in m==!!N&&(N?m.localName===N:m.nodeType===3)){e=m,o[d]=null;break}}if(e==null){if(N===null)return document.createTextNode(I);e=document.createElementNS(s,N,I.is&&I),a&&(C.__m&&C.__m(t,o),a=!1),o=null}if(N===null)k===I||a&&e.data===I||(e.data=I);else{if(o=o&&Ce.call(e.childNodes),k=n.props||Ie,!a&&o!=null)for(k={},d=0;d<e.attributes.length;d++)k[(m=e.attributes[d]).name]=m.value;for(d in k)if(m=k[d],d!="children"){if(d=="dangerouslySetInnerHTML")u=m;else if(!(d in I)){if(d=="value"&&"defaultValue"in I||d=="checked"&&"defaultChecked"in I)continue;Be(e,d,null,m,s)}}for(d in I)m=I[d],d=="children"?p=m:d=="dangerouslySetInnerHTML"?h=m:d=="value"?f=m:d=="checked"?g=m:a&&typeof m!="function"||k[d]===m||Be(e,d,m,k[d],s);if(h)a||u&&(h.__html===u.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(u&&(e.innerHTML=""),Fn(e,Ve(p)?p:[p],t,n,i,N==="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,c,o?o[0]:n.__k&&we(n,0),a,l),o!=null)for(d=o.length;d--;)Gn(o[d]);a||(d="value",N==="progress"&&f==null?e.removeAttribute("value"):f!==void 0&&(f!==e[d]||N==="progress"&&!f||N==="option"&&f!==k[d])&&Be(e,d,f,k[d],s),d="checked",g!==void 0&&g!==e[d]&&Be(e,d,g,k[d],s))}return e}function Nt(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(s){C.__e(s,n)}}function Wn(e,t,n){var i,s;if(C.unmount&&C.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||Nt(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){C.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&Wn(i[s],t,n||typeof e.type!="function");n||Gn(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function ri(e,t,n){return this.constructor(e,n)}function jn(e,t,n){var i,s,o,c;C.__&&C.__(e,t),s=(i=typeof n=="function")?null:t.__k,o=[],c=[],Tt(t,e=(!i&&n||t).__k=Ee(x,null,[e]),s||Ie,Ie,t.namespaceURI,!i&&n?[n]:s?null:t.firstChild?Ce.call(t.childNodes):null,o,!i&&n?n:s?s.__e:t.firstChild,i,c),Hn(o,e,c)}function ii(e,t,n){var i,s,o,c,a=ne({},e.props);for(o in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)o=="key"?i=t[o]:o=="ref"?s=t[o]:a[o]=t[o]===void 0&&c!==void 0?c[o]:t[o];return arguments.length>2&&(a.children=arguments.length>3?Ce.call(arguments,2):n),Te(e.type,a,i||e.key,s||e.ref,null)}function q(e,t){var n={__c:t="__cC"+On++,__:e,Consumer:function(i,s){return i.children(s)},Provider:function(i){var s,o;return this.getChildContext||(s=[],(o={})[t]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&s.some(function(a){a.__e=!0,ft(a)})},this.sub=function(c){s.push(c);var a=c.componentWillUnmount;c.componentWillUnmount=function(){s&&s.splice(s.indexOf(c),1),a&&a.call(c)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}Ce=Bn.slice,C={__e:function(e,t,n,i){for(var s,o,c;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),c=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,i||{}),c=s.__d),c)return s.__E=s}catch(a){e=a}throw e}},Mn=0,ie.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ne({},this.state),typeof e=="function"&&(e=e(ne({},n),this.props)),e&&ne(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ft(this))},ie.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ft(this))},ie.prototype.render=x,he=[],$n=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ht=function(e,t){return e.__v.__b-t.__v.__b},je.__r=0,kt=0,mt=Yt(!1),pt=Yt(!0),On=0;var me,M,rt,Vt,Se=0,Yn=[],U=C,qt=U.__b,Qt=U.__r,Kt=U.diffed,Jt=U.__c,Xt=U.unmount,Zt=U.__;function Pe(e,t){U.__h&&U.__h(M,e,Se||t),Se=0;var n=M.__H||(M.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function E(e){return Se=1,si(Vn,e)}function si(e,t,n){var i=Pe(me++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):Vn(void 0,t),function(a){var l=i.__N?i.__N[0]:i.__[0],d=i.t(l,a);l!==d&&(i.__N=[d,i.__[1]],i.__c.setState({}))}],i.__c=M,!M.u)){var s=function(a,l,d){if(!i.__c.__H)return!0;var h=i.__c.__H.__.filter(function(p){return!!p.__c});if(h.every(function(p){return!p.__N}))return!o||o.call(this,a,l,d);var u=!1;return h.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(u=!0)}}),!(!u&&i.__c.props===a)&&(!o||o.call(this,a,l,d))};M.u=!0;var o=M.shouldComponentUpdate,c=M.componentWillUpdate;M.componentWillUpdate=function(a,l,d){if(this.__e){var h=o;o=void 0,s(a,l,d),o=h}c&&c.call(this,a,l,d)},M.shouldComponentUpdate=s}return i.__N||i.__}function L(e,t){var n=Pe(me++,3);!U.__s&&It(n.__H,t)&&(n.__=e,n.i=t,M.__H.__h.push(n))}function qe(e,t){var n=Pe(me++,4);!U.__s&&It(n.__H,t)&&(n.__=e,n.i=t,M.__h.push(n))}function oe(e){return Se=5,Le(function(){return{current:e}},[])}function Le(e,t){var n=Pe(me++,7);return It(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function j(e,t){return Se=8,Le(function(){return e},t)}function Q(e){var t=M.context[e.__c],n=Pe(me++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(M)),t.props.value):e.__}function oi(){for(var e;e=Yn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(We),e.__H.__h.forEach(_t),e.__H.__h=[]}catch(t){e.__H.__h=[],U.__e(t,e.__v)}}U.__b=function(e){M=null,qt&&qt(e)},U.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Zt&&Zt(e,t)},U.__r=function(e){Qt&&Qt(e),me=0;var t=(M=e.__c).__H;t&&(rt===M?(t.__h=[],M.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(We),t.__h.forEach(_t),t.__h=[],me=0)),rt=M},U.diffed=function(e){Kt&&Kt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Yn.push(t)!==1&&Vt===U.requestAnimationFrame||((Vt=U.requestAnimationFrame)||ai)(oi)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),rt=M=null},U.__c=function(e,t){t.some(function(n){try{n.__h.forEach(We),n.__h=n.__h.filter(function(i){return!i.__||_t(i)})}catch(i){t.some(function(s){s.__h&&(s.__h=[])}),t=[],U.__e(i,n.__v)}}),Jt&&Jt(e,t)},U.unmount=function(e){Xt&&Xt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{We(i)}catch(s){t=s}}),n.__H=void 0,t&&U.__e(t,n.__v))};var en=typeof requestAnimationFrame=="function";function ai(e){var t,n=function(){clearTimeout(i),en&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);en&&(t=requestAnimationFrame(n))}function We(e){var t=M,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),M=t}function _t(e){var t=M;e.__c=e.__(),M=t}function It(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Vn(e,t){return typeof t=="function"?t(e):t}function ci(e,t){for(var n in t)e[n]=t[n];return e}function gt(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function tn(e,t){this.props=e,this.context=t}function Et(e,t){function n(s){var o=this.props.ref,c=o==s.ref;return!c&&o&&(o.call?o(null):o.current=null),t?!t(this.props,s)||!c:gt(this.props,s)}function i(s){return this.shouldComponentUpdate=n,Ee(e,s)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(tn.prototype=new ie).isPureReactComponent=!0,tn.prototype.shouldComponentUpdate=function(e,t){return gt(this.props,e)||gt(this.state,t)};var nn=C.__b;C.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),nn&&nn(e)};var rn=function(e,t){return e==null?null:se(se(e).map(t))},li={map:rn,forEach:rn,count:function(e){return e?se(e).length:0},only:function(e){var t=se(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:se},di=C.__e;C.__e=function(e,t,n,i){if(e.then){for(var s,o=t;o=o.__;)if((s=o.__c)&&s.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),s.__c(e,t)}di(e,t,n,i)};var sn=C.unmount;function qn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=ci({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return qn(i,t,n)})),e}function Qn(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return Qn(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function it(){this.__u=0,this.t=null,this.__b=null}function Kn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ge(){this.u=null,this.o=null}C.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),sn&&sn(e)},(it.prototype=new ie).__c=function(e,t){var n=t.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var s=Kn(i.__v),o=!1,c=function(){o||(o=!0,n.__R=null,s?s(a):a())};n.__R=c;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=Qn(l,l.__c.__P,l.__c.__O)}var d;for(i.setState({__a:i.__b=null});d=i.t.pop();)d.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(c,c)},it.prototype.componentWillUnmount=function(){this.t=[]},it.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=qn(this.__b,n,i.__O=i.__P)}this.__b=null}var s=t.__a&&Ee(x,null,e.fallback);return s&&(s.__u&=-33),[Ee(x,null,t.__a?null:e.children),s]};var on=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(Ge.prototype=new ie).__a=function(e){var t=this,n=Kn(t.__v),i=t.o.get(e);return i[0]++,function(s){var o=function(){t.props.revealOrder?(i.push(s),on(t,e,i)):s()};n?n(o):o()}},Ge.prototype.render=function(e){this.u=null,this.o=new Map;var t=se(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Ge.prototype.componentDidUpdate=Ge.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){on(e,n,t)})};var Jn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ui=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,hi=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,mi=/[A-Z0-9]/g,pi=typeof document<"u",fi=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function _i(e,t,n){return t.__k==null&&(t.textContent=""),jn(e,t),typeof n=="function"&&n(),e?e.__c:null}ie.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ie.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var an=C.event;function gi(){}function yi(){return this.cancelBubble}function bi(){return this.defaultPrevented}C.event=function(e){return an&&(e=an(e)),e.persist=gi,e.isPropagationStopped=yi,e.isDefaultPrevented=bi,e.nativeEvent=e};var vi={enumerable:!1,configurable:!0,get:function(){return this.class}},cn=C.vnode;C.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,i=t.type,s={},o=i.indexOf("-")===-1;for(var c in n){var a=n[c];if(!(c==="value"&&"defaultValue"in n&&a==null||pi&&c==="children"&&i==="noscript"||c==="class"||c==="className")){var l=c.toLowerCase();c==="defaultValue"&&"value"in n&&n.value==null?c="value":c==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?c="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||fi(n.type)?l==="onfocus"?c="onfocusin":l==="onblur"?c="onfocusout":hi.test(c)&&(c=l):l=c="oninput":o&&ui.test(c)?c=c.replace(mi,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&s[c=l]&&(c="oninputCapture"),s[c]=a}}i=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=se(n.children).forEach(function(d){d.props.selected=s.value.indexOf(d.props.value)!=-1})),i=="select"&&s.defaultValue!=null&&(s.value=se(n.children).forEach(function(d){d.props.selected=s.multiple?s.defaultValue.indexOf(d.props.value)!=-1:s.defaultValue==d.props.value})),n.class&&!n.className?(s.class=n.class,Object.defineProperty(s,"className",vi)):(n.className&&!n.class||n.class&&n.className)&&(s.class=s.className=n.className),t.props=s}(e),e.$$typeof=Jn,cn&&cn(e)};var ln=C.__r;C.__r=function(e){ln&&ln(e),e.__c};var dn=C.diffed;C.diffed=function(e){dn&&dn(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function Xn(e){return!!e&&e.$$typeof===Jn}function wi(e){return Xn(e)?ii.apply(null,arguments):e}function xi(e){return!!e.__k&&(jn(null,e),!0)}var ki=0;function r(e,t,n,i,s,o){t||(t={});var c,a,l=t;if("ref"in l)for(a in l={},t)a=="ref"?c=t[a]:l[a]=t[a];var d={type:e,props:l,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--ki,__i:-1,__u:0,__source:s,__self:o};if(typeof e=="function"&&(c=e.defaultProps))for(a in c)l[a]===void 0&&(l[a]=c[a]);return C.vnode&&C.vnode(d),d}function Ti(e){return{render:function(t){_i(t,e)},unmount:function(){xi(e)}}}function pe(e){return typeof e=="string"&&!e.includes("T")?new Date(e+"T00:00:00"):new Date(e)}class Zn{constructor(t){P(this,"fmt");this.fmt=Intl.DateTimeFormat("en-US",t)}format(t){return this.fmt.format(pe(t))}parts(t){return Object.fromEntries(this.fmt.formatToParts(pe(t)).map(n=>[n.type,n.value]))}}const Ne=class Ne{constructor(t){P(this,"date");P(this,"time");const n=Ne.format.parts(pe(t??Date.now()));this.date=`${n.year}-${n.month}-${n.day}`,this.time=`${n.hour}:${n.minute}:${n.second}`}static setTimeZone(t){const n="2-digit";Ne.format=new Zn({timeZone:t,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n})}};P(Ne,"format");let F=Ne;F.setTimeZone("America/New_York");function Ni(e){e=pe(e);const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}function De(e,t){return e=pe(e),t&&e.setDate(e.getDate()+t),Ni(e)}function R(e={}){const t=new F,{date:n=t.date,time:i=t.time}=e;return(i??"1")>"03:00:00"?n:De(n,-1)}function Ii(e,t){const n=pe(e),i=n.toLocaleString("en-US",{month:"long",day:"numeric"});if(t==="short")return i;const s=R();return e===s?`Today, ${i}`:e===De(s,1)?`Tomorrow, ${i}`:`${n.toLocaleString("en-US",{weekday:"long"})}, ${i}`}function H(e){const t=e.split(":").slice(0,2).map(Number),n=t[0]>=12?"PM":"AM";return t[0]=t[0]%12||12,t.map(i=>String(i).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function Z(e){const[t,n]=e.slice(0,19).split("T");return{date:t,time:n}}function ce(e){const[t,n]=e.split(":").map(Number);return(t+17)%24*60+n}function ye(e){if(!Array.isArray(e))return[];const t=new F().time.slice(0,5),n=e.findIndex(i=>i>=t);return n>=0?e.slice(n):[]}const st=e=>Array.isArray(e)?e.join("."):e,$={get(e){const t=localStorage.getItem(st(e));try{return JSON.parse(t??"")}catch{return}},set(e,t){localStorage.setItem(st(e),JSON.stringify(t))},delete(e){localStorage.removeItem(st(e))},clear(){localStorage.clear()},getDaily(e){const{date:t,value:n}=this.get(e)??{};return t===R()?n:void 0},setDaily(e,t){this.set(e,{date:R(),value:t})}},ot=["bg1","auth"];class er extends Error{constructor(){super("Auth data missing or expired");P(this,"name","ReauthNeeded")}}class Ei{constructor(){P(this,"onUnauthorized",()=>{})}getData(){try{const t=$.get(ot);if(t){const{swid:n,accessToken:i,expires:s}=t,o=new F(s),c=new F;if(o.date>c.date||o.date===c.date&&o.time>c.time&&o.time>="17")return{swid:n,accessToken:i}}}catch(t){console.error(t)}throw this.deleteData(),new er}setData(t){$.set(ot,t)}deleteData(){$.delete(ot),setTimeout(this.onUnauthorized)}}const X=new Ei,Si=8e3;async function tr(e,t={}){const{params:n,data:i,timeout:s=Si,...o}=t;t=o,t.referrer||(t.referrer=""),t.credentials||(t.credentials="omit"),t.cache||(t.cache="no-store"),t.headers={...t.headers||{}},n&&Object.keys(n).length>0&&(e+=(e.includes("?")?"&":"?")+Object.entries(n).filter(([,d])=>d!=="").map(d=>d.map(encodeURIComponent).join("=")).join("&")),i&&(t.method||(t.method="POST"),t.headers={...t.headers,"Content-Type":"application/json"},t.body=JSON.stringify(i)),t.method||(t.method="GET");const c=new AbortController;t.signal=c.signal;const a=setTimeout(()=>c.abort(),s);let l;try{l=await fetch(e,t)}catch(d){return console.error(d),{ok:!1,status:0,data:null}}finally{clearTimeout(a)}return{ok:l.ok,status:l.status,data:(l.headers.get("Content-Type")||"").startsWith("application/json")?await l.json():{}}}class nr extends Error{constructor(){super(...arguments);P(this,"name","InvalidOrigin")}}class ge extends Error{constructor(n,i="Request failed"){super(`${i}: ${JSON.stringify(n)}`);P(this,"name","RequestError");this.response=n}}class Ae{constructor(t){P(this,"resort");P(this,"origin");this.resort=t,this.origin=this.constructor.origins[this.resort.id]}static originToResortId(t){var s;const i=(s=Object.entries(this.origins).find(([,o])=>o===t))==null?void 0:s[0];if(i)return i;throw new nr(t)}async request(t){const{swid:n,accessToken:i}=X.getData(),s=this.origin+t.path,o=await tr(s,{method:t.method,params:t.params,data:t.data,headers:{"Accept-Language":"en-US",Authorization:`BEARER ${i}`,"x-user-id":n}});if(o.status===401&&!t.ignoreUnauth)setTimeout(()=>X.deleteData());else{const{key:c}=t;if(o.ok&&(!c||o.data[c]))return{...o,data:c?o.data[c]:o.data}}throw new ge(o)}}P(Ae,"origins",{WDW:"https://disneyworld.disney.go.com",DLR:"https://disneyland.disney.go.com"});const Di={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},St="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",Ci=St+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",Pi=St+"wdpro-assets/avatars/180x180/RetAvatar-180x180",Li=St+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",Ai={"-":Pi,5:Li};function Dt(e){const t=Di[e||""];if(t)return(Ai[t[0]]||Ci)+t+".png"}const Qe={bg:"bg-blue-500",text:"text-blue-500"},rr=q(Qe),ir=rr.Provider,Y=()=>Q(rr),Ri="modulepreload",Mi=function(e){return"/bg1/"+e},un={},Ye=function(t,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),a=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Mi(l),l in un)return;un[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Ri,d||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),d)return new Promise((p,m)=>{u.addEventListener("load",p),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(c){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=c,window.dispatchEvent(a),!a.defaultPrevented)throw c}return s.then(c=>{for(const a of c||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},$i=(e,t,n)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((s,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})};class le extends Error{constructor(n){super(`Invalid ID: ${n}`);P(this,"name","InvalidId")}}class sr{constructor(t,n){P(this,"id");P(this,"parks");P(this,"parksById");P(this,"expsById");P(this,"dropExpsByPark");var i,s,o;this.id=t,this.parks=n.parks,this.parksById=Object.fromEntries(this.parks.map(c=>[c.id,c])),this.expsById=n.experiences,this.dropExpsByPark=new Map(this.parks.map(c=>[c,[]]));for(const[c,a]of Object.entries(this.expsById))a&&(a.id=c,a.park=a.land.park),a!=null&&a.dropTimes&&((i=this.dropExpsByPark.get(a.land.park))==null||i.push(a));for(const c of this.parks)c.dropTimes=[...new Set((s=this.dropExpsByPark.get(c))==null?void 0:s.flatMap(a=>a.dropTimes??[]))].sort(),(o=this.dropExpsByPark.get(c))==null||o.sort((a,l)=>a.name.localeCompare(l.name))}experience(t){const n=this.expsById[t];if(n)return n;throw n!==null&&console.warn(`Missing experience: ${t}`),new le(t)}park(t){const n=this.parksById[t];if(n)return n;throw new le(t)}dropExperiences(t){return this.dropExpsByPark.get(t)??[]}}async function Oi(e){const t=await $i(Object.assign({"./data/dlr.ts":()=>Ye(()=>import("./dlr.js"),[]),"./data/wdw.ts":()=>Ye(()=>import("./wdw.js"),[])}),`./data/${e.toLowerCase()}.ts`,3);return new sr(e,t)}const Bi={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"};function Re(e,t,n){return e.type===t&&e.subtype===n}const Gi=new Set(["ACTIVITY","DINING"]),ke=e=>e.split(";")[0];class Ui extends Ae{constructor(){super(...arguments);P(this,"onRefresh",()=>{});P(this,"onUnauthorized",()=>{})}async plans(){const{swid:n}=X.getData(),i=new F().date,s=R(),o=Bi[this.resort.id],{data:{loggedInGuestId:c="",items:a=[],assets:l={},profiles:d={}}}=await this.request({path:`/plan/${o}/api/v1/itinerary-items/${n}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY&item-types=VIRTUAL_QUEUE_POSITION`,params:{destination:this.resort.id,fields:"items,profiles,assets,loggedInGuestId","guest-locators":n+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":i,"show-friends":"false"},ignoreUnauth:!0}),h=ke(c),u=y=>{const{name:T,avatarId:w,type:b}=d[y.id],_=ke(y.id);return{id:_,name:`${T.firstName??""} ${T.lastName??""}`.trim(),avatarImageUrl:Dt(w),primary:_===h,...b==="transactional"&&{transactional:!0}}},p=y=>{const T=l[y.asset],b=l[T.facility].location??"",_=this.park(b);_.name===""&&b&&(_.name=l[b].name);const v=new Date(y.startDateTime);return{type:"RES",subtype:y.type,id:ke(y.asset),park:_,name:T.name,start:new F(v),guests:y.guests.map(u).sort((O,et)=>+et.primary-+O.primary||+!et.transactional-+!O.transactional||O.name.localeCompare(et.name)),bookingId:y.id}},m=y=>{const T=l[y.facility],w=new Set;return{...this.experienceData(y.facility,T.location,T.name),start:(y.displayStartDate??i)<s?{date:s}:{date:y.displayStartDate??i,time:y.displayStartTime},end:{date:y.displayEndDate,time:y.displayEndTime},guests:y.guests.filter(b=>w.has(b.id)||b.redemptionsRemaining===0?!1:(w.add(b.id),!0)).map(b=>({...u(b),entitlementId:b.entitlementId,bookingId:b.bookingId,...b.redemptionsRemaining!==void 0&&{redemptions:Math.min(b.redemptionsRemaining,b.redemptionsAllowed??1)}})),bookingId:y.id}},f=y=>{const T={FLEX:"MP",STANDARD:"SP",OTHER:"OTHER"}[y.kind]??"OTHER",w=T==="MP";let b={type:"LL",subtype:T,...m(y),cancellable:y.cancellable&&w,modifiable:y.modifiable&&w,bookingId:y.id};if(y.multipleExperiences){const _=y.assets.find(v=>v.original);b={...b,..._?this.experienceData(_.content,l[_.content].location):{id:"",name:""}},b.choices=y.assets.filter(v=>!v.excluded&&!v.original).map(({content:v})=>{const{name:S,location:O}=l[v];return this.experienceData(v,O,S)}).sort((v,S)=>v.name.localeCompare(S.name))}return b},g=y=>{const w={DAS:"IN_PARK",FDS:"ADVANCE"}[y.kind],b=w==="IN_PARK";return{type:"DAS",subtype:w,cancellable:y.cancellable&&b,...m(y)}},k=y=>{const T=l[y.asset],w=l[T.facility],b=this.experienceData(T.facility,w.location,T.name);return b.park.name===""&&(b.park.name=w.name),{...b,type:"BG",boardingGroup:y.boardingGroup.id,status:y.status,start:new F(new Date(y.startDateTime)),guests:y.guests.map(u),bookingId:y.id}},N={PARK_PASS:y=>{const T=this.park(l[y.facility].location);if(T)return{type:"APR",id:T.id,name:T.name,park:T,start:{date:y.displayStartDate,time:"06:00:00"},guests:y.guests.map(u),bookingId:y.id}},DAS:g,FDS:g},D=a.map(y=>{try{if(y.type==="FASTPASS")return(N[y.kind]??f)(y);if(y.type==="VIRTUAL_QUEUE_POSITION")return k(y);if(y.type&&Gi.has(y.type))return p(y)}catch(T){console.error(T)}}).filter(y=>!!y);return this.onRefresh(D),D}experienceData(n,i,s="Experience"){n=ke(n);try{const o=this.resort.experience(n);return{id:n,name:o.name,park:o.park}}catch(o){if(o instanceof le&&i)return{id:n,name:s,park:this.park(i)};throw o}}park(n){n=ke(n);try{return this.resort.park(n)}catch(i){if(i instanceof le)return{id:n,name:"",icon:"",geo:{n:0,s:0,e:0,w:0},theme:Qe,dropTimes:[],waitThreshold:0};throw i}}}const Fi={WDW:{id:"80010110",park:{id:"80007944"}},DLR:{id:"353295",park:{id:"330339"}}};class zi extends Error{constructor(){super(...arguments);P(this,"name","ModifyNotAllowed")}}function or(e){if(e&&!e.modifiable)throw new zi}class Ct extends Error{constructor(n){super("Offer request failed");P(this,"name","OfferError");this.guests=n}}function at(e,t,n){return+(t.ineligibleReason===n)-+(e.ineligibleReason===n)}var ve;class Pt extends Ae{constructor(n,i){super(n);P(this,"rules",{maxPartySize:12,parkModify:!1,prebook:!1,timeSelect:!1});P(this,"nextBookTime");P(this,"onUnauthorized",()=>{});P(this,"partyIds",new Set);P(this,"tracker");nt(this,ve,"");P(this,"convertGuest",n=>{const{id:i,firstName:s,lastName:o,characterId:c,...a}=n,l=`${s??""} ${o??""}`.trim(),d=Dt(c);return this.partyIds.size>0&&!this.partyIds.has(i)&&(a.ineligibleReason="NOT_IN_PARTY",delete a.eligibleAfter),{...a,id:i,name:l,avatarImageUrl:d}});this.tracker=i??new Hi}setPartyIds(n){this.partyIds=new Set(n)}async experiences(n,i){var o,c,a,l;const{data:s}=await this.request({path:`/tipboard-vas/planning/v1/parks/${encodeURIComponent(n.id)}/experiences/`,params:{eligibilityGuestIds:await this.primaryGuestId(),date:i},userId:!0});return this.nextBookTime=(l=(((a=(c=(o=s.eligibility)==null?void 0:o.geniePlusEligibility)==null?void 0:c[R()])==null?void 0:a.flexEligibilityWindows)||[]).sort((d,h)=>d.time.time.localeCompare(h.time.time))[0])==null?void 0:l.time.time,s.availableExperiences.flatMap(d=>{try{return[{...d,...this.resort.experience(d.id),park:n,experienced:this.tracker.experienced(d)}]}catch(h){if(h instanceof le)return[];throw h}})}track(n){this.tracker.update(n,this)}async cancelBooking(n){const s=n.map(o=>o.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${s}`,method:"DELETE"})}async primaryGuestId(){var n;if(!tt(this,ve)){const{eligible:i,ineligible:s}=await this.guests();Ht(this,ve,((n=[...i,...s].find(o=>o.primary))==null?void 0:n.id)??"")}return tt(this,ve)}async request(n){if(n.userId){const{swid:i}=X.getData();n={...n},n.params={...n.params,userId:i}}return super.request(n)}parseGuestData(n){const{guests:i,ineligibleGuests:s}=n,o=s.map(this.convertGuest),c=i.map(this.convertGuest).filter(a=>!a.ineligibleReason||o.push(a)&&!1);return o.sort((a,l)=>{const d=+!a.primary-+!l.primary||a.name.localeCompare(l.name);return a.eligibleAfter||l.eligibleAfter?(a.eligibleAfter||"9").localeCompare(l.eligibleAfter||"9")||d:a.ineligibleReason===l.ineligibleReason?d:at(l,a,"NOT_IN_PARTY")||at(l,a,"MULTI_PASS_NEEDED")||at(a,l,"EXPERIENCE_LIMIT_REACHED")||d}),{eligible:c,ineligible:o}}fallbackExperience(n){return n?this.resort.experience(n.id):Fi[this.resort.id]}}ve=new WeakMap;const hn=["bg1","ll","bookings"];class Hi{constructor(){P(this,"bookedIds",new Set);P(this,"experiencedIds",new Set);this.load()}experienced(t){return this.experiencedIds.has(t.id)}async update(t,n){this.load();const i=R(),s=t.filter(c=>Re(c,"LL","MP")&&!!c.cancellable&&R(c.start)===i);for(const c of s)this.experiencedIds[c.modifiable?"delete":"add"](c.id);const o=this.bookedIds;this.bookedIds=new Set(s.map(c=>c.id));for(const c of o){if(this.bookedIds.has(c))continue;const{ineligible:a}=await n.guests({id:c}),l=a.some(d=>d.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.experiencedIds[l?"add":"delete"](c)}this.save()}load(){const{booked:t=[],experienced:n=[]}=$.getDaily(hn)??{};this.bookedIds=new Set(t),this.experiencedIds=new Set(n)}save(){$.setDaily(hn,{booked:[...this.bookedIds],experienced:[...this.experiencedIds]})}}const Wi=e=>e.sort((t,n)=>+n.primary-+t.primary||+n.preselected-+t.preselected||t.name.localeCompare(n.name)),ji=e=>`/application/v1/guest/${e}`;class Lt extends Ae{async getQueues(){var n;const t=await this.post({resource:"getQueues"});if(!Array.isArray((n=t.data)==null?void 0:n.queues))throw new ge(t);return t.data.queues.filter(i=>!!i.categoryContentId).map(({queueId:i,tabContentId:s="",...o})=>{const c={...o,id:i};try{c.park=this.resort.park(s.split(";")[0])}catch(a){if(!(a instanceof le))throw a}return c})}async getQueue(t){const n=(await this.getQueues()).find(i=>i.id===t.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(t){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:t.id,requestType:"REVIEW"}});return Wi(n.guests.map(({guestId:i,firstName:s="",lastName:o="",isPrimaryGuest:c,isPreselected:a,avatarImageUrl:l})=>({id:i,name:`${s} ${o}`.trim(),primary:!!c,preselected:!!a,avatarImageUrl:l})))}async joinQueue(t,n){const i=n.map(c=>c.id),s=await this.post({resource:"joinQueue",data:{queueId:t.id,guestIds:i}}),{data:o}=s;if(o.responseStatus==="OK"){const c=o.positions.find(a=>a.queueId===t.id&&a.guestIds.length>0&&i.some(l=>a.guestIds.includes(l)));if(!c)throw new ge(s);return{boardingGroup:c.boardingGroup,conflicts:{},closed:!1}}else if(o.responseStatus==="INVALID_GUEST"||o.responseStatus==="CLOSED_QUEUE"){const c=o.responseStatus==="CLOSED_QUEUE",a=new Set,l={};for(const u of o.conflicts)for(const p of u.guestIds){const m=n.find(f=>f.id===p);m&&(l[m.id]=u.conflictType,a.add(p))}const d=n.filter(u=>!a.has(u.id));if(c||d.length===0)return{boardingGroup:null,conflicts:l,closed:c};const h=await this.joinQueue(t,d);return h.conflicts={...l,...h.conflicts},h}else throw new ge(s)}async post(t){try{return await this.request({...t,path:ji(t.resource)})}catch(n){if(n instanceof ge){const i=n.response,{ok:s,status:o}=i;if(!s&&o<500&&o!==401)return i}throw n}}}P(Lt,"origins",{WDW:"https://vqguest-svc-wdw.wdprapps.disney.com",DLR:"https://vqguest-svc.wdprapps.disney.com"});const _e=(e,t)=>`/das-vas/api/v${t}/${e}`;function mn(e){return{id:e.id,name:e.name.replace(/ \(Me\)$/,""),avatarImageUrl:Dt(e.characterId)}}function pn(e,t){return{primaryGuestId:e.id,guestIds:t.map(n=>n.id).join(",")}}class ar extends Error{constructor(n){super();P(this,"name","ConflictsError");this.conflicts=n}}class Yi extends Error{constructor(){super(...arguments);P(this,"name","ExperienceUnavailable")}}var xt;class Vi extends Ae{constructor(){super(...arguments);P(this,"bookingGuestId");nt(this,xt)}async experiences(n){const i=encodeURIComponent(n.id),{data:s}=await this.request({path:_e(`availability/parks/${i}/experiences`,2),key:"experiences"});return s.filter(o=>o.available&&!!o.nextAvailableStartDateTime).map(({id:o,name:c,type:a,available:l,nextAvailableStartDateTime:d})=>{const{time:h}=Z(d);try{return{type:a,...this.resort.experience(o),available:l,time:h}}catch{return{id:o,name:c,type:a,available:l,time:h}}}).sort((o,c)=>o.name.localeCompare(c.name))}async parties(){const{swid:n}=X.getData(),{data:{bookingGuestId:i,parties:s}}=await this.request({path:_e(`users/${encodeURIComponent(n)}/parties`,1)});return this.bookingGuestId=i,s.map(o=>({primaryGuest:mn(o.primaryGuest),linkedGuests:o.linkedGuests.map(mn),selectionLimit:o.selectionLimit}))}async book({park:n,experience:i,primaryGuest:s,guests:o}){var h;const c=await this.eligibility({park:n,experience:i,primaryGuest:s,guests:o}),a=new Set((h=c.find(({type:u})=>u==="ELIGIBLE"))==null?void 0:h.guestIds);if(!o.every(u=>a.has(u.id)))throw new ar(Object.fromEntries(c.filter(u=>u.type!=="ELIGIBLE").flatMap(u=>u.guestIds.map(p=>[p,u.type]))));const l=new Map(o.map(u=>[u.id,u])),{data:d}=await this.request({path:_e("bookings",2),key:"booking",data:{bookingGuestId:this.bookingGuestId,primaryGuestId:s.id,guestIds:o.map(u=>u.id),experienceId:i.id,...await this.availability({experience:i,primaryGuest:s,guests:o})}});return{type:"DAS",subtype:"IN_PARK",id:i.id,name:i.name,park:n,guests:d.entitlements.map(u=>{const p=l.get(u.guestId);return{id:u.guestId,name:(p==null?void 0:p.name)??"",avatarImageUrl:p==null?void 0:p.avatarImageUrl,entitlementId:u.id}}),start:Z(d.startDateTime),end:{},bookingId:d.id}}async cancelBooking(n){const s=n.map(o=>o.entitlementId).map(encodeURIComponent).join(",");await this.request({path:_e(`entitlements/${s}`,1),method:"DELETE"})}async eligibility({park:n,experience:i,primaryGuest:s,guests:o}){const{data:c}=await this.request({path:_e("eligibility",1),params:{experienceId:i.id,parkId:n.id,...pn(s,o)},key:"eligibility"});return c}async availability({experience:n,primaryGuest:i,guests:s}){const o=encodeURIComponent(n.id),{data:{startDateTime:c,endDateTime:a}}=await this.request({path:_e(`availability/experiences/${o}`,3),params:pn(i,s)});if(!c||!a)throw new Yi;return{startDateTime:c,endDateTime:a}}}xt=new WeakMap;class qi{constructor(t){P(this,"cachedShowtimes",{});this.resort=t}async shows(t){Object.keys(this.cachedShowtimes).length===0&&(this.cachedShowtimes=(await this.request("showtimes")).data);const n=this.cachedShowtimes[t.id]??{},{time:i}=new F;return Object.fromEntries(Object.entries(n).flatMap(([s,o])=>{const c=o.filter(u=>u>=i),a=c[0],l=c.slice(1),d=a!==void 0,h=d?void 0:"NO_MORE_SHOWS";try{return[[s,{type:"ENTERTAINMENT",...this.resort.experience(s),park:t,standby:{available:d,unavailableReason:h,nextShowTime:a},additionalShowTimes:l}]]}catch(u){if(u instanceof le)return[];throw u}}))}async request(t){const n=await tr(`https://bg1.joelface.com/livedata/${this.resort.id.toLowerCase()}/${t}.json`);if(!n.ok)throw new Error("Fetch failed");return n}}class Qi extends Pt{async experiences(t){return super.experiences(t,R())}async guests(t){const n=this.fallbackExperience(t),{data:i}=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:n.id,parkId:n.park.id},userId:!0});return this.parseGuestData(i)}async offer(t,n,{booking:i}={}){var m;or(i);const{data:{offer:{id:s,date:o,startTime:c,endTime:a,status:l,changeStatus:d},eligibleGuests:h,ineligibleGuests:u}}=await this.request({path:i?"/ea-vas/api/v1/products/modifications/flex/offers":"/ea-vas/api/v2/products/flex/offers",data:{guestIds:((i==null?void 0:i.guests)??n).map(f=>f.id),ineligibleGuests:[],primaryGuestId:n.map(f=>f.id).sort((f,g)=>f.localeCompare(g))[0],parkId:t.park.id,experienceId:t.id,selectedTime:((m=t.flex)==null?void 0:m.nextAvailableTime)??"08:00:00",...i?{date:new F().date,modificationType:t.id===i.id?"TIME":"EXPERIENCE"}:{}}});Ye(()=>import("./diu.js"),[]);const p={eligible:(h||[]).map(this.convertGuest),ineligible:(u||[]).map(this.convertGuest)};if(l!=="ACTIVE")throw new Ct(p);return{id:s,start:{date:o,time:c},end:{date:o,time:a},changed:d!=="NONE",booking:i,guests:p,experience:t}}async times(){return[]}async changeOfferTime(t){return t}async book(t,n){var f;const i=(await Ye(async()=>{const{default:g}=await import("./diu.js");return{default:g}},[])).default,s=new Map(t.guests.eligible.map(g=>[g.id,g])),o=new Set((n??t.guests.eligible).map(g=>g.id)),{data:c}=await this.request({path:t.booking?"/ea-vas/api/v2/products/modifications/flex/bookings":"/ea-vas/api/v2/products/flex/bookings",data:{offerId:t.id,...await i(t.id),...t.booking?{date:new F().date,modificationType:t.booking.id===t.experience.id?"TIME":"EXPERIENCE",existingEntitlements:t.booking.guests.filter(g=>o.has(g.id)).map(g=>({entitlementId:g.entitlementId,entitlementBookingId:g.bookingId})),guestIdsToExclude:t.booking.guests.filter(g=>!o.has(g.id)).map(g=>g.id)}:{}},key:"booking"}),{singleExperienceDetails:{experienceId:a},entitlements:l,startDateTime:d,endDateTime:h}=c,{id:u,name:p,park:m}=this.resort.experience(a);return{id:u,name:p,park:m,type:"LL",subtype:"MP",bookingId:(f=l[0])==null?void 0:f.id,start:Z(d),end:Z(h),cancellable:!0,modifiable:!0,guests:l.map(g=>({id:g.guestId,name:"Guest",...s.get(g.guestId),entitlementId:g.id}))}}}class Ki extends Pt{constructor(){super(...arguments);P(this,"rules",{maxPartySize:20,parkModify:!0,prebook:!0,timeSelect:!0})}async guests(n,i){const s=this.fallbackExperience(n),{data:o}=await this.request({path:"/ea-vas/planning/api/v1/experiences/guest/guests",data:{date:i??new F().date,facilityId:s.id,parkId:s.park.id}});return this.parseGuestData(o)}async offer(n,i,s){var N;const o=R(),{date:c,booking:a}={date:o,booking:void 0,...s};or(a);const{nextAvailableTime:l}=n.flex??{},{data:d}=await this.request({path:`/ea-vas/planning/api/v1/experiences${a?"/mod":""}/offerset/generate`,data:{date:a?a.start.date:c,parkId:n.park.id,guestIds:i.map(D=>D.id),targetedTime:l??"08:00:00",ignoredBookedExperienceIds:null,...a?{experienceId:n.id,originalExperienceId:a.id,originalEntitlementIds:a.guests.map(D=>D.entitlementId)}:{experienceIds:[n.id]}}}),h=this.parseGuestData(d.party),u=(N=(d.itinerary??{}).items)==null?void 0:N.find(D=>D.type==="OFFER_ITEM");if(!u)throw new Ct(h);const{offerSetId:p,offerId:m,startDateTime:f,endDateTime:g}=u,k=Object.fromEntries(i.map(D=>[D.id,D]));let I={offerSetId:p,id:m,start:Z(f),end:Z(g),experience:n,guests:{eligible:h.eligible.map(D=>({...k[D.id],...D})),ineligible:h.ineligible},changed:u.conflict==="ALTERNATIVE_TIME_FOUND",booking:a};if(I.changed&&l&&ce(I.start.time)-ce(l)>10)try{I=await this.changeOfferTime(I,{startTime:"08:00:00",endTime:"08:00:00"}),I.changed=I.start.time!==l}catch(D){console.error(D)}return I}async times(n){const{data:i}=await this.request({path:`/ea-vas/planning/api/v1/experiences${n.booking?"/mod":""}/offerset/times`,data:{experienceId:n.experience.id,parkId:n.experience.park.id,date:n.start.date,offerId:n.id,offerSetIds:[n.offerSetId],guestIds:n.guests.eligible.map(s=>s.id),offerType:"FLEX",experienceIdsToIgnore:[],originalOrderItemId:null}});return i.hourSegmentGroups.map(s=>s.inventorySlotsAvailability.map(({startTime:o,endTime:c})=>({startTime:o,endTime:c})))}async changeOfferTime(n,i){const{data:{updatedPlanningOfferDisplayItem:s}}=await this.request({path:`/ea-vas/planning/api/v1/experiences${n.booking?"/mod":""}/offerset/times/fulfill`,data:{parkId:n.experience.park.id,date:n.start.date,offerId:n.id,...n.booking?{offerSetId:n.offerSetId}:{offerSetIds:[n.offerSetId]},offerType:"FLEX",guestIds:n.guests.eligible.map(o=>o.id),targetSlot:i,experienceIdsToIgnore:[]}});return{...n,id:s.offerId,offerSetId:s.offerSetId,start:Z(s.startDateTime),end:Z(s.endDateTime),changed:s.conflict==="ALTERNATIVE_TIME_FOUND"}}async book(n,i){if(n.booking)return this.modify(n,i);const{data:s}=await this.request({path:"/ea-vas/planning/api/v1/experiences/entitlements/book",data:{offerSetId:n.offerSetId,orderGuestDetails:n.guests.eligible.filter(o=>!!o.orderDetails).map(({id:o,orderDetails:{externalIdentifier:c,...a}})=>({guestDetails:[{guestId:o,externalIdentifier:c}],...a}))}});return this.createLLFromResponse(s)}async modify(n,i){const{offerSetId:s,guests:{eligible:o}}=n,c=new Set((i??n.guests.eligible).map(d=>d.id)),a=Object.fromEntries(n.booking.guests.map(d=>[d.id,d.entitlementId])),{data:l}=await this.request({path:"/ea-vas/planning/api/v1/experiences/mod/entitlements/book",data:{offerSetId:s,eligibleGuestsEntitlements:o.filter(d=>c.has(d.id)).map(d=>({guestId:d.id,entitlementId:a[d.id],...d.orderDetails}))}});return this.createLLFromResponse({entitlementExperiences:[l.booking],party:l.party})}createLLFromResponse(n){var l;const i=n.entitlementExperiences[0],s=Object.fromEntries(i.guests.map(d=>[d.guestId,d.entitlementId])),{id:o,name:c,park:a}=this.resort.experience(i.experienceId);return{id:o,name:c,park:a,type:"LL",subtype:"MP",bookingId:(l=i.guests[0])==null?void 0:l.entitlementId,start:Z(i.startDateTime),end:Z(i.endDateTime),cancellable:!0,modifiable:!0,guests:n.party.guests.map(d=>({...this.convertGuest(d),entitlementId:s[d.id]}))}}parseGuestData({guests:n,ineligibleGuests:i}){return super.parseGuestData({guests:n,ineligibleGuests:i.map(s=>s.ineligibleReason?{...s,ineligibleReason:s.ineligibleReason.ineligibleReason}:s)})}}const cr=q({das:{},itinerary:{},liveData:{},ll:{},vq:{}}),Ji=cr.Provider,B=()=>Q(cr);function Xi(e){const t=new Vi(e),n=new qi(e),i=new Lt(e),s=new(e.id==="WDW"?Ki:Qi)(e),o=new Ui(e);return o.onRefresh=c=>s.track(c),{das:t,itinerary:o,liveData:n,ll:s,vq:i}}const lr=q(new sr("WDW",{experiences:{},parks:[]})),Zi=lr.Provider,ee=()=>Q(lr),dr=q({goTo:()=>{},goBack:async()=>{}}),es=dr.Provider,G=()=>Q(dr),ur=q({current:r("div",{})}),ts=ur.Provider,hr=()=>Q(ur);let ns=0;const fn=()=>++ns,Ue=()=>Number(location.hash.slice(1))||0;let ct=()=>{};function mr({children:e}){const[t,n]=E({current:e}),i=oe([{elem:e,key:0}]),s=oe({goTo(c,a){let l=Ue(),d;a!=null&&a.replace?(d=i.current[l].key??fn(),n(h=>({...h,current:c}))):(i.current=i.current.slice(0,++l),location.hash=`#${l}`,d=fn()),i.current[l]={elem:c,key:d}},goBack({screen:c,props:a}={}){if(c){const l=Ue();for(let d=l-1;d>=0;--d)if(i.current[d].elem.type===c){if(history.go(d-l),a){const h={...i.current[d].elem.props,...a};i.current[d].elem=r(c,{...h})}break}}else history.back();return new Promise(l=>{ct=()=>{l(),ct=()=>{}}})}});L(()=>{function c(){var d,h;ct();const l=Ue();l>=i.current.length?history.back():n({current:((d=i.current[l])==null?void 0:d.elem)??r("div",{}),prev:(h=i.current[l-1])==null?void 0:h.elem})}function a(l){l.preventDefault()}return location.replace("#0"),addEventListener("hashchange",c),addEventListener("beforeunload",a),()=>{removeEventListener("hashchange",c),removeEventListener("beforeunload",a)}},[]);const o=Math.min(Ue(),i.current.length-1);return r(es,{value:s.current,children:r(ts,{value:t,children:i.current.slice(0,o+1).map(({elem:c,key:a},l)=>r("article",{hidden:l!==o,children:c},a))})})}const rs={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function A(e){const{goBack:t}=G(),{type:n,back:i,onClick:s,className:o,...c}=e;let a=`${rs[n||"normal"]} ${o||""}`;const{bg:l}=Y();return a.includes(" bg-")||(a+=` ${l} text-white`),r("button",{onClick:async()=>{s&&await s(),i&&(i===!0?t():t(i))},className:`${a} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...c})}function K(e){return r("div",{className:"mb-20",children:r("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center",children:r(A,{...e,className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full"})})})}function V({children:e,className:t,title:n}){return t||(t=""),t.match(/\bw-\S+\s*/)||(t+=" w-4"),t.match(/\bh-\S+\s*/)||(t+=" h-auto"),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:`mx-auto ${t}`,role:"img",children:[n&&r("title",{children:n}),e]})}/**
 * Modified arrow-left2 icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function is(e){return r(V,{...e,children:r("path",{d:"M0.293,7.337L7.333,0.297C7.723,-0.093 8.357,-0.093 8.747,0.297C9.137,0.687 9.137,1.321 8.747,1.711L3.414,7.044L15,7.044C15.552,7.044 16,7.492 16,8.044C16,8.596 15.552,9.044 15,9.044L3.414,9.044L8.747,14.377C9.137,14.767 9.137,15.401 8.747,15.791C8.357,16.181 7.723,16.181 7.333,15.791L0.293,8.751C0.102,8.561 0,8.307 0,8.044C0,7.781 0.102,7.527 0.293,7.337Z"})})}function ss({title:e,subhead:t,children:n}){const{prev:i}=hr(),{bg:s,text:o}=Y();function c(a){return!Xn(a)||typeof a.type=="string"?a:a.type===x?li.map(a.props.children,c):wi(a,{className:`min-h-[36px] bg-white bg-opacity-90 ${o} ${a.props.className||""}`})}return r("div",{className:`px-3 ext-lg text-white ${s}`,children:[r("div",{className:"flex flex-wrap justify-end gap-x-2 gap-y-1 min-h-[36px] py-2",children:[!!i&&r(A,{back:!0,className:"-my-2 -ml-3",title:"Go Back",children:r(is,{})}),r("h1",{className:"flex-1 self-center py-1 text-xl font-semibold overflow-hidden whitespace-nowrap",children:e}),c(n)]}),r("div",{className:`empty:hidden flex flex-col gap-y-1 pb-1 ${s} text-white text-sm font-semibold uppercase text-center`,children:t})]})}function z({title:e,buttons:t,subhead:n,footer:i,theme:s,children:o,contentRef:c}){const a=Y();return s??(s=a),r(ir,{value:s,children:r("div",{className:"fixed inset-0 flex flex-col",children:[r(ss,{title:e,subhead:n,children:t}),r("div",{ref:c,className:"relative flex-1 overflow-auto px-3 pb-5",children:o}),i&&r("div",{className:`relative ${s.bg} text-white font-semibold`,children:i})]})})}const _n=["bg1","disclaimer","accepted"],os={bg:"bg-red-600",text:"text-red-600"};function as(){const[e,t]=E(!!$.get(_n));return e?null:r(cs,{onAccept:()=>{$.set(_n,1),t(!0)}})}function cs({onAccept:e}){return r(z,{title:"Warning!",theme:os,children:[r("p",{children:'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'}),r(K,{onClick:e,children:"Accept"})]})}function pr(){return r(z,{title:"BG1 News",children:r("iframe",{src:"https://joelface.github.io/bg1/news.html",className:"absolute inset-0 w-full h-full"})})}const gn=["bg1","news","version"];function ls(e){const[t,n]=E(()=>{const i=Number($.get(gn));return Number.isInteger(i)?i:0});return t<e?r(x,{children:[r(pr,{}),r(K,{onClick:()=>{$.set(gn,e),n(e)},children:"Close"})]}):null}function At(e){const t=()=>{document.hidden||e()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}const ds="https://cdn.registerdisney.go.com/v4/OneID.js",lt="oneid-script",us="oneid-wrapper",hs="oneid-secure-responder";function ms({resort:e,onLogin:t}){return L(()=>{const n=navigator.userAgent.includes("Android")?"AND":"IOS",i=`TPR-${e.id}-LBSDK.${n}`,s=()=>localStorage.removeItem(i+"-PROD.guest");let o=0;async function c(){if(!self.OneID){o=self.setTimeout(c,100);return}s();const a=self.OneID.get({clientId:i,responderPage:"https://joelface.github.io/bg1/responder.html"});a.on("login",({token:l})=>{s(),t({swid:l.swid,accessToken:l.access_token,expires:new Date(l.exp).getTime()})}),a.on("close",()=>{a.launchLogin()}),await a.init(),a.launchLogin()}if(!document.getElementById(lt)){const a=document.createElement("script");a.id=lt,a.src=ds,document.head.appendChild(a)}return c(),()=>{var a;o&&clearTimeout(o);for(const l of[us,hs,lt]){const d=document.getElementById(l);(a=d==null?void 0:d.parentNode)==null||a.removeChild(d)}}},[e,t]),r("div",{className:"fixed top-0 left-0 w-full h-full border-0"})}const dt=["bg1","date"],ps=22,fr=q({bookingDate:R(),setBookingDate:()=>{}}),ae=()=>Q(fr);function _r(){const e=R();return[...Array(ps).keys()].map(t=>De(e,t))}function yn(e){return e&&_r().includes(e)?e:R()}function fs({children:e}){const{prebook:t}=B().ll.rules,[n,i]=E(()=>t?yn($.getDaily(dt)):R()),s=j(o=>{i(c=>(o=typeof o=="function"?o(c):o,t?(o=yn(o),$.setDaily(dt,o),o):R()))},[t,i]);return L(()=>{$.setDaily(dt,n)},[n]),r(fr.Provider,{value:{bookingDate:n,setBookingDate:s},children:e})}const gr=q([]),yr=()=>Q(gr);function _s({children:e}){const{das:t}=B(),[n,i]=E([]);return L(()=>{(async()=>{try{i(await t.parties())}catch(s){if(s instanceof ge)return;throw s}})()},[t]),r(gr.Provider,{value:n,children:e})}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Rt({className:e}){return r(V,{className:e,children:r("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"})})}function Mt(e){const{children:t,color:n="bg-black",className:i="",...s}=e;return r("div",{className:`fixed inset-0 z-10 flex items-center justify-center p-2 ${n} bg-opacity-75 ${i}`,...s,children:t})}function gs(){const{bg:e}=Y();return r(Mt,{color:"bg-white",children:r("div",{className:"w-[50px] mx-auto",children:r("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${e}`,children:r(Rt,{className:"animate-spin w-full text-white"})})})})}const ys=3e3,bs={alert:"bg-yellow-200",error:"bg-red-200"};function br(){const[,e]=E(0),[t,n]=E(""),[i,s]=E("alert"),o=j((a,l)=>{n(a),s(l||"alert"),e(d=>(clearTimeout(d),a?self.setTimeout(()=>{n("")},ys):d))},[]);return[t?r(vs,{message:t,type:i}):null,o]}function vs({message:e,type:t}){return e?r("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${bs[t]} text-gray-800`,children:e}):null}async function ws(e){return new Promise(t=>{setTimeout(t,e)})}const xs=500;function J(){const[e,t]=E(0),[n,i]=br(),s=j(async(c,a={})=>{var f;const{messages:l={},minLoadTime:d=xs}=a,h={error:"Unknown error occurred",request:"Network request failed",...l};i("");let u=[""];function p(...g){u=g}t(g=>g+1);const m=ws(d);try{await c(p)}catch(g){const k=(f=g==null?void 0:g.response)==null?void 0:f.status;g instanceof Error&&h[g.name]?p(h[g.name],"error"):Number.isInteger(k)?p(k in h?h[k]:h.request,"error"):(console.error(g),p(h.error,"error"))}await m,t(g=>g-1),i(...u)},[i]),o=e>0||n?r(x,{children:[e>0&&r(gs,{}),n]}):null;return{loadData:s,loaderElem:o,flash:i}}function vr(e){const[,t]=E(0);return j((n=0)=>{t(i=>Date.now()-i<n?i:(e(),Date.now()))},[e])}const wr=q({plans:[],refreshPlans:()=>{},loaderElem:null}),te=()=>Q(wr);function ks({children:e}){const{itinerary:t}=B(),{loadData:n,loaderElem:i}=J(),[s,o]=E([]),[c,a]=E(!1),l=vr(j(()=>{n(async()=>{o(await t.plans()),a(!0)})},[t,n]));return L(l,[l]),r(wr.Provider,{value:{plans:s,plansLoaded:c,refreshPlans:l,loaderElem:i},children:e})}const bn=["bg1","park"],xr=q({park:{},setPark:()=>{}}),de=()=>Q(xr);function kr(){const e=ee(),{setPark:t}=de(),{plans:n}=te();return j(i=>{const s=R(),o=i===s,c=new Set(e.parks.map(h=>h.id)),a=h=>c.has(h.park.id),l=h=>Re(h,"LL","MP");let d;for(const h of n){const u=R(h.start);if(!(u<i)){if(u>i||l(h)&&(d=h.park,!o))break;!d&&a(h)&&(d=h.park)}}t(h=>d??(h.id?h:e.parks[0]))},[n,e,t])}function Ts(){const{plansLoaded:e,loaderElem:t}=te(),{bookingDate:n}=ae(),i=kr();return L(()=>{e&&i(n)},[e,n,i]),t}function Ns({children:e}){const t=ee(),[n,i]=E(()=>{const s=$.getDaily(bn);if(!s)return{};try{return t.park(s)}catch(o){return o instanceof le||console.error(o),t.parks[0]}});return L(()=>{n.id&&$.setDaily(bn,n.id)},[n]),r(xr.Provider,{value:{park:n,setPark:i},children:n.id?e:r(Ts,{})})}const Tr=q({experiences:[],refreshExperiences:()=>{},loaderElem:null}),Ke=()=>Q(Tr);function Is({children:e}){const{ll:t,liveData:n}=B(),{park:i}=de(),{bookingDate:s}=ae(),{loadData:o,loaderElem:c}=J(),[a,l]=E([]),d=vr(j(()=>{o(async()=>{const h=n.shows(i);let u={...Object.fromEntries((await t.experiences(i,s)).map(p=>[p.id,p]))};try{u={...await h,...u}}catch(p){console.error(p)}l(Object.values(u))})},[i,s,t,n,o]));return qe(()=>l([]),[i,s]),L(d,[d]),r(Tr.Provider,{value:{experiences:a,refreshExperiences:d,loaderElem:c},children:e})}const Nr=q({current:void 0,begin:()=>{},end:()=>{}}),ue=()=>Q(Nr);function Es({children:e,current:t}){const{setBookingDate:n}=ae(),[i,s]=E(()=>({current:t,begin:o=>{n(c=>(s({...i,current:o,prevBookingDate:c}),o.start.date))},end:()=>{s(o=>(o.prevBookingDate&&n(o.prevBookingDate),{...o,current:void 0,prevBookingDate:void 0}))}}));return r(Nr.Provider,{value:i,children:e})}const Ir=q({tabs:[],active:{name:"",icon:r("div",{}),component:()=>null},changeTab:()=>{},scrollPos:{get:()=>0,set:()=>{}}}),Er=()=>Q(Ir);function Ss({name:e,icon:t}){const n=Y(),{active:i,changeTab:s}=Er();if(!s)return null;const c=(i==null?void 0:i.name)===e?`bg-white bg-opacity-90 ${n.text}`:`${n.bg} text-white`;return r("button",{className:"px-4 py-2",onClick:()=>s(e),children:[r("div",{className:`min-w-[3rem] rounded-full py-1.5 ${c}`,children:t}),r("div",{className:"mt-0.5 text-sm",children:e})]})}function $t({title:e,buttons:t,subhead:n,children:i,contentRef:s}){const{tabs:o,scrollPos:c,footer:a}=Er();let l=oe(null);return s&&(l=s),qe(()=>{const d=l.current;if(!d)return;d.scroll(0,c.get());const h=()=>c.set(d.scrollTop);return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)},[c]),r(z,{title:e,buttons:t,subhead:n,footer:r(x,{children:[r("div",{className:"flex items-center justify-center",children:o.map(d=>Ee(Ss,{...d,key:d.name}))}),a]}),contentRef:l,children:i})}function Ds({tabs:e,footer:t},n){return function i({tabName:s}){const{goTo:o}=G(),c=j(d=>{d!==s&&o(r(i,{tabName:d}),{replace:!0})},[s,o]),a=oe(Object.fromEntries(e.map(d=>[d.name,0]))),l=e.find(({name:d})=>d===s)??e[0];return l?r(Ir.Provider,{value:{tabs:e,active:l,changeTab:c,scrollPos:{get:()=>a.current[l.name],set:d=>{a.current[l.name]=d}},footer:t},children:r(n,{tab:l})}):null}}/**
 * Calendar icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Sr({className:e}){return r(V,{className:e,children:r("path",{d:"M5 6h2v2h-2zM8 6h2v2h-2zM11 6h2v2h-2zM2 12h2v2h-2zM5 12h2v2h-2zM8 12h2v2h-2zM5 9h2v2h-2zM8 9h2v2h-2zM11 9h2v2h-2zM2 9h2v2h-2zM13 0v1h-2v-1h-7v1h-2v-1h-2v16h15v-16h-2zM14 15h-13v-11h13v11z"})})}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Cs(e){return r(V,{...e,children:r("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"})})}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function yt(e){return r(V,{...e,children:r("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"})})}/**
 * Checkmark icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function vn({className:e}){return r(V,{className:e,children:r("path",{d:"M13.5 2l-7.5 7.5-3.5-3.5-2.5 2.5 6 6 10-10z"})})}/**
 * Arrow-down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function wn(e){return r(V,{...e,children:r("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"})})}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ps(e){return r(V,{...e,children:r("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"})})}function re({date:e,time:t,type:n,...i}){return r("time",{...i,dateTime:e||t,children:e?Ii(e,n):t?H(t):""})}function Dr({start:e,end:t}){const n=R(e),i=R(t);return t?r("span",{className:"whitespace-nowrap",children:[e.time?r(re,{time:e.time}):r("span",{children:"Park Open"})," \u2013"," ",i>n?r(re,{date:i,type:"short"}):t.time?r(re,{time:t.time}):r("span",{children:"Park Close"})]}):r(re,{time:e.time})}const xn=r("span",{"aria-hidden":!0,children:"\u2022"});function Cr({booking:e,button:t}){const n=Y();return r("div",{className:"flex items-center gap-x-3",children:[r("div",{className:"flex-1 min-w-0",children:[r("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase whitespace-nowrap",children:[e.type==="DAS"&&r(x,{children:[r("span",{children:"DAS"}),xn]}),e.type==="BG"?r(x,{children:[r("span",{children:["BG ",e.boardingGroup]}),e.status==="SUMMONED"&&r(x,{children:[xn,r("span",{className:`${n.text} font-bold`,children:"Board Now"})]})]}):r(Dr,{...e})]}),r("div",{className:"text-lg font-semibold leading-snug truncate",children:e.choices?"Multiple Experiences":e.name})]}),t&&r("div",{children:t})]})}function Je(){const e=ue();return e.current?r("div",{children:r("div",{className:"-mx-3",children:[r("div",{className:"pb-1",children:"Modifying Reservation"}),r("div",{className:"px-3 py-2 bg-white text-black text-base font-normal normal-case text-left",children:r(Cr,{booking:e.current,button:r(A,{type:"small",back:{screen:fe},onClick:e.end,children:"Keep"})})})]})}):null}function W({guests:e,selectable:t,conflicts:n}){const[i,s]=br();if(e.length===0)return null;const o=new Set(t?e.filter(t==null?void 0:t.isSelected):[]),c=o.size>=((t==null?void 0:t.limit)??1/0);return r(x,{children:[r("ul",{className:"mt-2",children:e.map(a=>{var h;const l=o.has(a),d=c&&!l;return r("li",{className:"px-3 py-1",onClick:()=>s(d?"Selection limit reached":""),children:r("label",{className:"flex items-center",children:[t&&r("input",{type:"checkbox",checked:l,disabled:d,onChange:()=>t.onToggle(a),className:"mr-3"}),r("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white",children:a.avatarImageUrl?r("img",{src:a.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):r("span",{"aria-hidden":"true",children:a.name[0]})}),r("span",{className:"leading-tight",children:[a.name,(n==null?void 0:n[a.id])&&r("span",{className:"block text-xs font-semibold text-red-700 uppercase",children:(h=n[a.id])==null?void 0:h.replace(/_/g," ")})]})]})},a.id)})}),i]})}const Pr=["bg1","genie","partyIds"];function Lr(){const e=$.get(Pr)??[];return Array.isArray(e)?e:[]}function Ls(){const{ll:e}=B();L(()=>e.setPartyIds(Lr()),[e])}function As(){const{ll:e}=B(),{loadData:t,loaderElem:n}=J(),[i,s]=E(!0),[o,c]=E(),[a,l]=E(()=>{const m=new Set(Lr());return s(m.size===0),m});function d(){const m=[...a];$.set(Pr,m),e.setPartyIds(m)}L(()=>{t(async()=>{const m=await e.guests();c([...m.eligible,...m.ineligible].sort((f,g)=>+!f.primary-+!g.primary||f.name.localeCompare(g.name)))})},[e,t]),L(()=>{i&&l(new Set)},[i]);const h=o==null?void 0:o.filter(m=>a.has(m.id)),u=o==null?void 0:o.filter(m=>!a.has(m.id)),p=m=>r("li",{children:r("label",{className:"flex items-center mt-2",children:[r("input",{type:"radio",name:"auto",onChange:()=>s(m.auto),checked:i===m.auto,className:"mr-2"})," ",m.children]})});return r(z,{title:"Party Selection",children:[r("p",{children:"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."}),r("ul",{children:[r(p,{auto:!0,children:"Book for all eligible guests"}),r(p,{auto:!1,children:"Only book for selected guests"})]}),i?null:(o==null?void 0:o.length)===0?r("p",{className:"text-red-700",children:"No guests to select"}):h&&u?r(x,{children:[h.length>0&&r(x,{children:[r("h3",{children:"Your Party"}),r(W,{guests:h,selectable:{isSelected:()=>!0,onToggle:m=>{const f=new Set(a);f.delete(m.id),l(f)}}})]}),u.length>0&&r(x,{children:[r("h3",{children:"Add to Your Party"}),r(W,{guests:u,selectable:{isSelected:()=>!1,onToggle:m=>{const f=new Set(a);f.add(m.id),l(f)}}})]})]}):null,n,r(K,{back:!0,disabled:!i&&a.size===0,onClick:d,children:"Save"})]})}function Me({name:e,onClick:t,...n}){return r(A,{...n,title:`Refresh ${e}`,onClick:t,children:r(Rt,{})})}function Ar(e){const{options:t,selected:n,title:i,onChange:s,disabled:o,menuType:c,...a}=e,{bg:l}=Y(),[d,h]=E(!1),[u,p]=E(0),m=oe(null),f=oe(null);qe(()=>{var S;if((S=t.values().next().value)!=null&&S.icon)return;const w=m.current,b=w==null?void 0:w.firstChild;if(!b)return;const _=b.nodeValue;if(!_)return;let v=0;for(const O of t.values())b.nodeValue=O.buttonText??O.text,v=Math.max(w.offsetWidth,v);b.nodeValue=_,p(v)},[t]);const g=()=>{var w;return(w=f.current)==null?void 0:w.querySelector("input:checked")};L(()=>{var _;if(!d)return;const w=g();(_=w==null?void 0:w.closest("li"))==null||_.scrollIntoView({block:"center"}),w==null||w.focus();const b=v=>{var S;(S=f.current)!=null&&S.contains(v.target)||h(!1)};return addEventListener("focusin",b),()=>removeEventListener("focusin",b)},[d]);const k=()=>{const w=g();if(w){const b=w.value,_=t.get(b);_&&s(_.value??b)}h(!1)},I=n?t.get(n):i!==void 0?{text:i}:void 0;if(!I)return null;const{icon:N,text:D,buttonText:y}=I;let T=!1;return r(x,{children:[r(A,{...a,title:i,"aria-label":N?D:void 0,disabled:o||t.size===0,onClick:()=>h(!0),children:[N||r("span",{className:"flex-1 truncate",style:{minWidth:`${u}px`},ref:m,children:y??D}),r(V,{className:"w-2.5 ml-2 shrink-0",children:r("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"})})]}),d&&r(Mt,{onChange:()=>{T||k(),T=!1},onClick:w=>{var b;T||((b=f.current)!=null&&b.contains(w.target)?w.target===g()&&(h(!1),k()):h(!1))},onKeyDown:({key:w})=>{["Enter"," "].includes(w)?k():w.startsWith("Arrow")&&(T=!0)},"data-testid":"shade",children:r("div",{className:"flex flex-col min-w-[min(50%,400px)] max-w-[400px] max-h-[90%] rounded-lg bg-white text-black",children:[i&&r("h3",{className:`mt-0 rounded-t-lg px-5 py-1 ${l} text-white font-semibold text-center`,children:i}),r("form",{"aria-label":`${i} Selection`,ref:f,children:r(c,{...e})})]})})]})}function Rs(e){const{bookingDate:t,setBookingDate:n}=ae(),i=kr(),s=R(),o=Le(()=>new Map(_r().map(c=>{const[,a,l]=c.split("-"),d=c===s?"Today":`${+a}/${+l}`,h=String(+l);return[c,{buttonText:d,text:h}]})),[s]);return r(Ar,{...e,title:"Booking Date",options:o,selected:t,onChange:c=>{c!==t&&(n(c),i(c))},menuType:Ms})}function Ms(e){const{bg:t}=Y(),{options:n,selected:i}=e,s=[...n.keys()],o=pe(s[0]),c=De(o,-o.getDay()),a=new Zn({month:"long"}),l=a.format(o),d=a.format(s[s.length-1]),h=Math.ceil(n.size/7);return r("div",{className:"px-1 pb-1",children:[r("h4",{className:"mt-3 text-lg text-center",children:l===d?l:r(x,{children:[l," \u2013 ",d]})}),r("table",{className:"table-fixed border-separate border-spacing-[2px] w-full mt-2 font-semibold",children:[r("thead",{children:r("tr",{children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(u=>r("th",{className:"text-xs font-semibold uppercase text-center text-gray-500",children:u},u))})}),r("tbody",{children:[...Array(h).keys()].map(u=>r("tr",{children:[...Array(7).keys()].map(p=>{const m=De(c,u*7+p),f=n.get(m);return f?r("td",{className:"p-0",children:r("label",{className:`block p-2 ${t} text-white`,children:r("span",{className:"flex items-center justify-center border-y-4 border-transparent has-[:checked]:border-white py-0.5",children:[r("input",{type:"radio",name:"bookingDate",value:m,defaultChecked:m===i,className:"fixed opacity-0 pointer-events-none"}),r("time",{dateTime:m,children:f.text})]})})},p):r("td",{},p)})},u))})]})]})}const Rr=q({eligible:[],ineligible:[],selected:[],setSelected:()=>null,experience:{name:"",park:{name:"",theme:{bg:"",text:""}}}}),Mr=Rr.Provider,$r=()=>Q(Rr),$s="https://bg1.joelface.com/ping";async function Xe(e,t){const{date:n}=new F,i=["bg1","ping",e.id,t];if($.get(i)===n)return;const{ok:o}=await fetch($s,{method:"POST",body:new URLSearchParams({resort:e.id,service:t})});o&&$.set(i,n)}function Ot({booking:e}){const{bookingDate:t}=ae();return r(re,{date:e?R(e.start):t})}function Os(e){return r(V,{...e,children:r("path",{d:"M 5.5253906 0.9296875 L 3.4042969 3.0507812 L 8.3535156 8 L 3.4042969 12.949219 L 5.5253906 15.070312 L 10.474609 10.121094 L 12.595703 8 L 10.474609 5.8789062 L 5.5253906 0.9296875 z"})})}function Or(e){return r("div",{className:`mt-4 border-2 rounded border-green-600 p-1 font-semibold text-center text-green-600 bg-green-100 ${e.className}`,children:e.children})}function Bs({bg:e,experiences:t,heading:n}){return r("div",{className:`mt-4 rounded ${e}`,children:[r("h3",{className:"mt-0 p-1 text-white text-center",children:n}),r("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90",children:t.map(i=>r("li",{children:i.name},i.id))})]})}function $e({start:e,end:t,button:n}){return r("div",{className:"mt-4 text-lg",children:r("div",{className:"flex items-center gap-x-3",children:[r("div",{children:[t?"Arrive by":"Reservation at",":"," ",r("span",{className:"pl-1 font-semibold",children:r(Dr,{start:e,end:t})})]}),r("div",{children:n})]})})}function Bt({offer:e,onOfferChange:t}){const{goBack:n}=G(),{ll:i}=B(),s=ue(),{loadData:o,loaderElem:c}=J(),[a,l]=E(),{booking:d}=e,h=d&&!s.current,u=j(()=>{function p(m){const f=e.start.time;if(!d||f===d.start.time)return m;const g={startTime:f,endTime:e.end.time},k=w=>Number(w.split(":")[0]),I=k(f),N=m.map(w=>k(w[0].startTime)),D=N.findIndex(w=>w>=I),y=N[D],T=m[D]??[];return D===-1?m.push([g]):y>I?m.splice(D,0,[g]):f<T[0].startTime&&(T.length<3?T.unshift(g):T[0]=g),m}o(async()=>{const m=await i.times(e);l(h?p(m):m)})},[e,d,h,i,o]);return L(u,[u]),r(z,{title:"Select Return Time",buttons:r(x,{children:[r(Gr,{}),r(Me,{name:"Times",onClick:u})]}),subhead:r(x,{children:[r(Je,{}),r(Ot,{})]}),theme:e.experience.park.theme,children:[r("h2",{children:e.experience.name}),r("div",{children:e.experience.park.name}),e&&r($e,{...h?d:e,button:r(A,{type:"small",onClick:n,children:"Keep"})}),a?a.length>0?r(x,{children:[r("h3",{children:"More Available Times"}),r("table",{className:"whitespace-nowrap",children:r("tbody",{children:a.map(p=>r("tr",{children:[r("th",{scope:"row",className:"pt-3 pr-2 text-gray-500 text-sm font-semibold text-right uppercase",children:H(p[0].startTime.slice(0,2))}),p.map(m=>r("td",{className:"pt-3 pr-3 text-center",children:r(A,{onClick:()=>{o(async()=>{const f=m.startTime===e.start.time?e:await i.changeOfferTime(e,m);await n(),t(f)})},children:H(m.startTime)})},m.startTime))]},p[0].startTime))})})]}):r("p",{children:"No other times available"}):null,c]})}function Gs({offer:e}){const t=ue(),{goTo:n,goBack:i}=G(),s=ee(),{ll:o}=B(),{loadData:c,loaderElem:a}=J(),{refreshPlans:l}=te(),[d,h]=E(e);L(()=>{const p=t.begin;return p(e.booking),t.end},[e,t.begin,t.end]);function u(){c(async()=>{const p=await o.book(d);l(),await i({screen:fe}),n(r(xe,{booking:p,isNew:!0})),Xe(s,"G")})}return r(z,{title:"Lightning Lane",subhead:r(x,{children:[r(Je,{}),r(Ot,{booking:d.booking})]}),theme:d.experience.park.theme,children:[r("h2",{children:d.experience.name}),r("div",{children:d.experience.park.name}),r($e,{...d,button:r(A,{type:"small",onClick:()=>{n(r(Bt,{offer:d,onOfferChange:h}))},children:"Change"})}),r("h3",{children:"Your Party"}),r(W,{guests:d.guests.eligible}),a,r(K,{onClick:u,children:"Modify Lightning Lane"})]})}function Us({booking:e,onCancel:t,dasGuest:n}){const{goBack:i}=G(),{ll:s,das:o}=B(),c=e.type==="DAS"?o:s,{refreshPlans:a}=te(),[l,d]=E(new Set),{loadData:h,loaderElem:u}=J(),{name:p,park:m,guests:f}=e,g=l.size===0,k=l.size===f.length;async function I(){g||(await h(async()=>{await c.cancelBooking([...l]),a()}),await i(),t(f.filter(N=>!l.has(N))))}return r(z,{title:"Cancel Guests",theme:m.theme,children:[r("h2",{children:p}),r("div",{children:m.name}),r($e,{...e}),r("div",{className:"ml-3",children:r("label",{className:"flex items-center py-4",children:[r("input",{type:"checkbox",checked:k,onChange:()=>d(new Set(k?[]:f))}),r("span",{className:"ml-3",children:"Select All"})]})}),!g&&r("div",{className:"mb-4",children:[r("h3",{children:"Cancel These Guests"}),r(W,{guests:f.filter(N=>l.has(N)),selectable:{isSelected:()=>!0,onToggle:N=>{if(n&&N!==n&&l.has(n))d(new Set);else{const D=new Set(l);D.delete(N),d(D)}}}})]}),!k&&r("div",{children:[r("h3",{children:"Select Guests to Cancel"}),r(W,{guests:f.filter(N=>!l.has(N)),selectable:{isSelected:()=>!1,onToggle:N=>{d(new Set(N===n?f:l).add(N))}}})]}),r(K,{disabled:g,onClick:I,children:"Cancel "+(k?"Reservation":"Guests")}),u]})}function xe({booking:e,isNew:t}){var _;const{goTo:n,goBack:i}=G(),{loadData:s,loaderElem:o}=J(),{parks:c}=ee(),{setPark:a}=de(),{ll:l}=B(),d=yr(),{name:h,park:u,choices:p,type:m,subtype:f,start:g}=e,k=m==="DAS"&&f==="IN_PARK"?e.guests.find(v=>d.find(S=>S.primaryGuest.id===v.id)):void 0,I=ue(),[N,D]=E(e.cancellable&&(m!=="DAS"||k)?e.guests:void 0),y=new Map([[u,[]],...c.map(v=>[v,[]])]);for(const v of p||[])(_=y.get(v.park))==null||_.push(v);const T=[...y].filter(([,v])=>v.length>0).map(([v])=>v),w=(p?T.length===1?T[0]:{}:u).theme??Qe;return r(z,{title:"Your "+{LL:"Lightning Lane",DAS:"DAS Selection",BG:"Boarding Group",APR:"Park Pass",RES:"Reservation"}[m],theme:w,buttons:e.modifiable&&!t&&r(A,{onClick:()=>{I.begin(e),a(e.park),i({screen:fe,props:{tabName:"LL"}})},children:"Modify"}),subhead:r(re,{date:R(g)}),children:[p?r("h2",{children:"Multiple Experiences"}):r(x,{children:[r("h2",{children:h}),u.name&&r("div",{children:u.name})]}),m==="BG"?r(x,{children:[e.status==="SUMMONED"&&r(Or,{children:"Your boarding group has been called"}),r("h3",{children:["Boarding Group:"," ",r("span",{className:"ml-1 font-semibold",children:e.boardingGroup})]}),r("p",{children:"Check the official Disney app for return time and other virtual queue information."})]}):r($e,{...e,button:l.rules.timeSelect&&e.modifiable&&r(A,{type:"small",onClick:()=>{s(async()=>{I.end(),n(r(Bt,{offer:await l.offer({...e,flex:{}},e.guests,{booking:e}),onOfferChange:v=>{n(r(Gs,{offer:v}))}}))},{messages:{410:"No other times available"}})},children:"Change"})}),p&&r(x,{children:[r("p",{children:[h&&r(x,{children:[r("b",{children:h})," was temporarily unavailable during your return time."," "]}),"You may redeem this Lightning Lane at one of these replacement experiences:"]}),[...y].filter(([,v])=>v.length>0).map(([v,S])=>r(Bs,{heading:v.name,experiences:S,bg:v.theme.bg},v.id))]}),r("div",{className:"flex mt-4",children:[r("h3",{className:"inline mt-0",children:"Your Party"}),e.cancellable&&N&&r(A,{type:"small",onClick:()=>{n(r(Us,{booking:{...e,guests:N},dasGuest:k,onCancel:v=>{v.length>0?D(v):i()}}))},className:"ml-3",children:"Cancel"})]}),r(W,{guests:N||e.guests,conflicts:Object.fromEntries(e.type==="LL"?e.guests.filter(v=>(v.redemptions??1)!==1).map(v=>[v.id,`Redemptions left: ${v.redemptions}`]):[])}),t&&r(K,{onClick:()=>i({screen:fe,props:{tabName:"Plans"}}),children:"Show Plans"}),o]})}function Br({...e}){const{plans:t,refreshPlans:n,loaderElem:i}=te();return r($t,{title:"Your Plans",buttons:r(Me,{name:"Plans",onClick:n}),theme:Qe,...e,children:[r(Fs,{plans:t}),i]})}const Fs=Et(function({plans:t}){var a,l;const{goTo:n}=G(),i=Y(),s=new Map,o=new Map;for(const d of t){const h=R(d.start);s.has(h)||s.set(h,[]),d.type!=="APR"&&((a=s.get(h))==null||a.push(d)),o.has(h)||o.set(h,new Set),(d.type!=="LL"||!d.choices)&&d.park.icon&&((l=o.get(h))==null||l.add(d.park))}const c=r("p",{className:"font-semibold text-center uppercase text-gray-500",children:"No existing plans"});return r("ul",{children:t.length>0?[...s].map(([d,h])=>r("li",{children:[r("div",{className:"sticky top-0 -mx-3 pt-1 bg-white",children:r("div",{className:"flex items-center",children:[r("h2",{className:`flex-1 mt-0 rounded-r-full px-3 py-1 ${i.bg} text-white text-sm uppercase`,children:r(re,{date:d})}),r("ul",{className:"px-3 pl-2 text-lg text-right",children:[...o.get(d)??[]].map(u=>r("li",{className:"inline ml-1 first:ml-0","aria-label":u.name,children:u.icon},u.id))})]})}),h.length>0?r("ul",{className:h.length===0?"mt-3":"",children:h.map(u=>r("li",{className:"py-2.5 first:border-0 border-t-4 border-gray-300",onClick:()=>n(r(xe,{booking:u})),children:r(Cr,{booking:u,button:r("div",{className:i.text,title:"More Info",children:r(Os,{})})})},u.bookingId))}):c]},d)):c})});function Gr({...e}){const{goTo:t}=G();return r(x,{children:r(A,{...e,onClick:()=>t(r(Br,{})),title:"Plans",children:r(Sr,{})})})}function Gt(){const{ineligible:e}=$r();return r(W,{guests:e,conflicts:Object.fromEntries(e.map(t=>[t.id,t.eligibleAfter?`TOO EARLY (${H(t.eligibleAfter)})`:t.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function zs(){const{ll:e}=B(),t=ue();return r(x,{children:[t.current?r(x,{children:[r("h3",{children:"Unable to Modify"}),r("p",{children:"Your current reservation cannot be modified to this experience due to the following conflicts:"})]}):r(x,{children:[e.nextBookTime&&e.nextBookTime.slice(0,5)>new F().time.slice(0,5)&&r(Or,{children:["Eligible at ",r(re,{time:e.nextBookTime})]}),r("h3",{children:"No Eligible Guests"}),r("p",{children:"No one in your party is currently eligible for this Lightning Lane."})]}),r(Gt,{})]})}function Hs({onRefresh:e}){return r(x,{children:[r("h3",{children:"No Guests Found"}),r("p",{children:"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."}),r(K,{onClick:e,children:"Try Again"})]})}function Ws(e){return r("div",{className:`mt-4 border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100 ${e.className}`,children:e.children})}function js({party:e}){const{eligible:t,ineligible:n,selected:i,setSelected:s,experience:o}=e,[c,a]=E(new Set(i)),{maxPartySize:l}=B().ll.rules;function d(h){c[c.has(h)?"delete":"add"](h),a(new Set(c))}return r(Mr,{value:e,children:r(z,{title:"Modify Party",theme:o.park.theme,children:[r("h2",{children:o.name}),r("div",{children:o.park.name}),r("h3",{children:"Your Party"}),r(W,{guests:t,selectable:{isSelected:h=>c.has(h),onToggle:d,limit:l}}),n.length>0&&r(x,{children:[r("h3",{children:"Ineligible Guests"}),r(Gt,{})]}),r(K,{back:!0,disabled:c.size===0,onClick:()=>{s(t.filter(h=>c.has(h)))},children:"Confirm Party"})]})})}function Ur(){const{goTo:e}=G(),t=$r(),{eligible:n,selected:i}=t,{maxPartySize:s}=B().ll.rules;return r(x,{children:[n.length>s&&i.length===s&&r(Ws,{children:"Party size restricted"}),i.length>0?r(x,{children:[r("div",{className:"mt-4",children:[r("h3",{className:"inline mt-0",children:"Your Party"}),r(A,{type:"small",onClick:()=>e(r(js,{party:t})),className:"ml-3",children:"Modify"})]}),r(W,{guests:i})]}):r(x,{children:[r("h3",{children:"Ineligible Guests"}),r(Gt,{})]})]})}function Ys(){return r(x,{children:[r("h3",{children:"No Reservations Available"}),r("p",{children:"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the attraction list and select another attraction."}),r(Ur,{})]})}function Vs({offer:e,onOfferChange:t}){const{goTo:n}=G(),{ll:i}=B();return r(x,{children:[r("div",{className:"flex items-center",children:r($e,{...e,button:i.rules.timeSelect&&r(A,{type:"small",onClick:()=>n(r(Bt,{offer:e,onOfferChange:t})),children:"Change"})})}),e.changed&&r("div",{className:"text-sm",children:[r("strong",{children:"Note:"})," Return time has been changed"]}),r(Ur,{})]})}function qs({experience:e}){const{goTo:t}=G(),n=ee(),{ll:i}=B(),{plans:s,refreshPlans:o}=te(),{bookingDate:c}=ae(),a=ue(),[l,d]=E(),[h,u]=E(),[p,m]=E(!1),{loadData:f,loaderElem:g}=J();async function k(){!h||!l||f(async()=>{const T=await i.book(h,l.selected);a.end();const w=new Set(l.selected.map(_=>_.id)),b=T.guests.filter(_=>!w.has(_.id));b.length>0&&(await i.cancelBooking(b),T.guests=T.guests.filter(_=>w.has(_.id))),t(r(xe,{booking:T,isNew:!0}),{replace:!0}),o(),Xe(n,"G")},{messages:{410:"Offer expired"}})}const I=j(()=>{f(async()=>{const T=a.current?{eligible:a.current.guests,ineligible:[]}:await i.guests(e,c);if(T.eligible.length===0&&T.ineligible.some(w=>w.ineligibleReason==="EXPERIENCE_LIMIT_REACHED")){const w=s.find(b=>b.id===e.id&&!!b.modifiable&&Re(b,"LL","MP"));w&&(m(!0),a.begin(w),T.eligible=w.guests,T.ineligible=[])}d({...T,selected:T.eligible.slice(0,i.rules.maxPartySize),setSelected:w=>d(b=>{if(!b)return b;const _=new Set(b.selected);return u(v=>v===null||w.some(S=>!_.has(S))?void 0:v),{...b,selected:w}}),experience:e})})},[s,i,e,c,a,f]);L(()=>{l||I()},[l,I]),L(()=>()=>{p&&a.end()},[p,a]);const N=j((T=!1)=>{if(!l||l.selected.length===0)return;function w({guests:b}){d(_=>({..._,...b,selected:b.eligible}))}f(async()=>{try{const b=await i.offer(e,l.selected,a.current?{booking:a.current}:{date:c}),{ineligible:_}=b.guests;if(_.length>0){const v=new Set(_.map(O=>O.id)),S=O=>!v.has(O.id);d({...l,eligible:l.eligible.filter(S),ineligible:[..._,...l.ineligible],selected:l.selected.filter(S)})}T||(b.changed=!1),u(b),_.length>0&&w(b)}catch(b){if(u(_=>_??null),b instanceof Ct)return w(b);throw b}},{messages:{410:T?"":"No reservations available"}})},[i,e,l,c,a,f]);L(()=>{h===void 0&&N(!0)},[h,N]);const D=(l==null?void 0:l.eligible.length)===0,y=D&&(l==null?void 0:l.ineligible.length)===0;return r(z,{title:"Lightning Lane",theme:e.park.theme,buttons:r(x,{children:[r(Gr,{}),r(Me,{onClick:()=>{D?I():N()},name:D?"Party":"Offer"})]}),subhead:r(x,{children:[r(Je,{}),r(Ot,{booking:h??void 0})]}),children:[r("h2",{children:e.name}),r("div",{children:e.park.name}),l&&r(Mr,{value:l,children:y?r(Hs,{onRefresh:I}):D?r(zs,{}):!l||h===void 0?r("div",{}):h===null?r(Ys,{}):r(x,{children:[r(Vs,{offer:h,onOfferChange:u}),r(K,{onClick:k,children:`${a.current?"Modify":"Book"} Lightning Lane`})]})}),g]})}function Oe({label:e,children:t}){return r("div",{className:"flex items-center flex-1 whitespace-nowrap",children:[r("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500",children:e})," ",t]})}function Qs({experience:e}){const{goTo:t}=G(),{flex:n}=e;return r(Oe,{label:"LL",children:r("span",{children:r(A,{onClick:()=>t(r(qs,{experience:e})),children:n.nextAvailableTime?H(n.nextAvailableTime):"none"})})})}function Fr({children:e}){return r("div",{className:"mt-8 flex justify-center",children:r("div",{children:[r("h2",{className:"mt-0 pl-1 text-gray-500 text-sm leading-tight uppercase",children:"Symbols"}),r("div",{className:"border-2 border-gray-500 rounded px-2 py-0.5 bg-gray-100",children:r("table",{children:r("tbody",{children:e})})})]})})}function be({sym:e,def:t,onInfo:n}){return r("tr",{children:[r("th",{className:"py-0.5 text-center font-bold",children:e}),r("td",{className:"pl-3 py-0.5",children:t}),n&&r("td",{className:"pl-3 py-0.5",children:r(A,{type:"small",onClick:n,children:"Info"})})]})}function zr(e){return r(Ar,{...e,menuType:Ks})}function Ks(e){const{options:t,selected:n}=e;return r("ul",{className:"overflow-auto",children:[...t].map(([i,s])=>r("li",{className:"border-t-2 first:border-0 border-gray-300",children:r("label",{className:"flex flex-row items-center gap-x-2.5 px-4 py-3",children:[r("input",{type:"radio",name:"_SELECT_RADIO_BUTTON_",value:i,defaultChecked:i===n,className:"w-4 h-4 shrink-0"})," ",s.icon&&r("span",{"aria-hidden":"true",children:s.icon})," ",s.text]})},s.text))})}function Hr(e){const{parks:t}=ee(),{ll:n}=B(),{park:i,setPark:s}=de(),o=ue(),c=Le(()=>new Map(t.map(a=>[a.id,{value:a,icon:a.icon,text:a.name}])),[t]);return r(zr,{...e,options:c,selected:i.id,onChange:s,disabled:!!o.current&&!n.rules.parkModify,title:"Park"})}function Js({experience:{type:e,standby:t,virtualQueue:n,avgWait:i},average:s}){return s?r(Xs,{time:i,virtualQueue:n}):t.nextShowTime||e==="ENTERTAINMENT"&&!t.waitTime?r(eo,{standby:t}):n?r(to,{virtualQueue:n}):r(Zs,{standby:t})}const Xs=({time:e,virtualQueue:t})=>r(Oe,{label:"Standby",children:r(Ze,{time:e!==void 0?r(x,{children:[Math.round(e/5)*5," min"]}):t?r("abbr",{title:"Virtual queue",children:"VQ"}):r("abbr",{title:"Not applicable",className:"px-1",children:"*"})})}),Zs=({standby:e})=>r(Oe,{label:"Standby",children:e.available?r(Ze,{time:e.waitTime!==void 0?e.waitTime+" min":"now"}):r(jr,{text:"down"})}),eo=({standby:e})=>r(Oe,{label:r(x,{children:["Next ",r("span",{className:"hidden xs:inline",children:"Show"})]}),children:e.nextShowTime?r(Ze,{time:H(e.nextShowTime)}):r(jr,{text:"none"})}),to=({virtualQueue:e})=>r(Oe,{label:r("abbr",{title:"Virtual Queue",children:"VQ"}),children:r(Ze,{time:e.nextAvailableTime?H(e.nextAvailableTime):"closed"})}),Wr="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",Ze=({time:e})=>r("span",{className:`${Wr} border-gray-500 text-gray-500 bg-gray-100`,children:e}),jr=({text:e})=>r("span",{className:`${Wr} border-red-600 text-red-600 bg-red-100`,children:e});function no({bookTime:e,dropTime:t}){const n=Y();return!e&&!t?null:r("div",{className:`flex justify-center gap-x-10 ${n.bg}`,children:[r(kn,{label:"Book",time:e}),r(kn,{label:"Drop",time:t})]})}function kn({label:e,time:t}){if(!t)return null;t=t.slice(0,5);const n=new F().time.slice(0,5);return r("div",{children:[e,":"," ",r("time",{dateTime:t,className:"whitespace-nowrap",children:t>n?H(t):"now"})]})}async function ro(e={}){return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(i=>{t(i)},i=>{n(i)},e)})}const io={maximumAge:15e3,timeout:2e3};function so(){const[e,t]=E(),n=j(async()=>{try{const{coords:i}=await ro(io);t(s=>s&&i.latitude===s[0]&&i.longitude===s[1]?s:[i.latitude,i.longitude])}catch{t(void 0)}},[]);return[e,n]}const Tn=["bg1","genie","sort"],oo=(e,t)=>(e.priority||1/0)-(t.priority||1/0)||(t.avgWait||-1)-(e.avgWait||-1),ao=(e,t,{isToday:n}={})=>n?(t.standby.waitTime||-1)-(e.standby.waitTime||-1):+!e.virtualQueue-+!t.virtualQueue||(t.avgWait||-1)-(e.avgWait||-1),co=(e,t)=>{var n,i;return ce(((n=e==null?void 0:e.flex)==null?void 0:n.nextAvailableTime)||"00:00")-ce(((i=t==null?void 0:t.flex)==null?void 0:i.nextAvailableTime)||"00:00")},Yr=(e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()),Nn=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)),lo=(e,t,{coords:n}={})=>e.geo===t.geo?0:e.geo?t.geo?n?Nn(e.geo,n)-Nn(t.geo,n):0:-1:1,uo={priority:oo,standby:ao,soonest:co,nearby:lo,aToZ:Yr};function ho(e,t){const{n,s:i,e:s,w:o}=e.geo,[c,a]=t;return c<n&&c>i&&a<s&&a>o}function mo(){const{park:e}=de(),{experiences:t}=Ke(),[n,i]=so(),{bookingDate:s}=ae(),o=s===R(),c=Le(()=>new Map([["priority",{text:"Priority"}],...o?[["nearby",{text:"Nearby"}]]:[],["standby",{text:"Standby"}],["soonest",{text:"Soonest"}],["aToZ",{text:"A to Z"}]]),[o]),[a,l]=E(()=>{const u=$.get(Tn);return u&&c.has(u)?u:"priority"});L(()=>{l(u=>c.has(u)?u:"priority")},[c]),L(()=>{a==="nearby"&&i()},[t,a,i]);const d=j((u,p)=>{var m,f;return Number((m=p==null?void 0:p.flex)==null?void 0:m.available)-Number((f=u==null?void 0:u.flex)==null?void 0:f.available)||uo[a==="nearby"&&!(n&&ho(e,n))?"priority":a](u,p,{coords:n,isToday:o})||Yr(u,p)},[n,e,a,o]);return{sortType:a,sorter:d,SortSelect:u=>r(zr,{...u,options:c,selected:a,onChange:p=>{l(p),$.set(Tn,p)},title:"Sort By"})}}const po=30,fo=60,In=["bg1","genie","tipBoard","starred"],bt="Lightning Pick",vt="Upcoming Drop",wt="Booked",En=e=>e.experienced&&!e.starred;function _o({contentRef:e}){Ls();const{ll:t}=B(),{park:n}=de(),{experiences:i,refreshExperiences:s,loaderElem:o}=Ke(),{bookingDate:c}=ae(),{sortType:a,sorter:l,SortSelect:d}=mo(),h=oe(!0);L(()=>{var m;h.current||(m=e.current)==null||m.scroll(0,0)},[a,e]),L(()=>{h.current=!1},[]);const u=R(),p=ye(n.dropTimes)[0];return r($t,{title:r("abbr",{title:"Lightning Lane",children:"LL"}),buttons:r(x,{children:[t.rules.prebook&&r(Rs,{}),r(d,{}),r(Hr,{}),r(Me,{name:"Experiences",onClick:s})]}),subhead:r(x,{children:[r(Je,{}),c===u&&r(no,{bookTime:t.nextBookTime,dropTime:p})]}),contentRef:e,children:[r(go,{experiences:i,park:n,sorter:l}),o]})}const go=Et(function({experiences:t,park:n,sorter:i}){const{goTo:s}=G(),o=Y(),c=ee(),{plans:a}=te(),{bookingDate:l}=ae(),[d,h]=E(()=>{const _=$.get(In)??[];return new Set(Array.isArray(_)?_:[])}),u=R(),p=l===u,m=p?ye(n.dropTimes)[0]:n.dropTimes[0],f=ce(new F().time);function g({id:_}){h(v=>(v=new Set(v),v.has(_)?v.delete(_):v.add(_),$.set(In,[...v]),v))}const k=()=>s(r(bo,{})),I=_=>s(r(vo,{park:n,experience:_,isBookingToday:p})),N=()=>s(r(wo,{})),D=({experiences:_,type:v})=>r("ul",{"data-testid":v,children:_.map(S=>{const O=p?ye(S.dropTimes??[])[0]:S.dropTimes?m:null;return r("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",children:[r("div",{className:"flex items-center gap-x-2 mt-2",children:[r(yo,{experience:S,toggleStar:g}),r("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate",children:S.name}),S.lp?r(ut,{name:bt,icon:yt,onClick:k}):O?r(ut,{name:vt,icon:wn,onClick:()=>I(S),className:O!==m?"opacity-50":""}):null,S.booked&&r(ut,{name:wt,icon:vn,onClick:N})]}),r("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[r(Js,{experience:S,average:!p}),r(Qs,{experience:S})]})]},S.id+(S.starred?"*":""))})}),y=new Set(a.filter(_=>Re(_,"LL","MP")&&_.start.date===l).map(_=>_.id)),T=t.filter(_=>!!_.flex).map(_=>{const v=_.standby.waitTime||0,{nextAvailableTime:S}=_.flex??{},O=Math.trunc(_.priority||4);return{..._,booked:y.has(_.id),lp:p&&!!S&&v>=po&&O<3&&ce(S)-f<=Math.min(fo,(4-O)/3*v),starred:d.has(_.id)}}).sort((_,v)=>+!_.starred-+!v.starred||+!_.lp-+!v.lp||i(_,v)),w=T.filter(_=>!En(_)),b=T.filter(En).sort((_,v)=>_.name.localeCompare(v.name));return r(x,{children:[r(D,{experiences:w,type:"unexperienced"}),b.length>0&&r(x,{children:[r("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${o.bg} text-white`,children:"Experienced or Expired"}),r(D,{experiences:b,type:"experienced"})]}),T.length>0&&r(x,{children:[r(Fr,{children:[r(be,{sym:r(yt,{className:o.text}),def:bt,onInfo:k}),n.dropTimes.length>0&&r(be,{sym:r(wn,{className:o.text}),def:vt,onInfo:I}),r(be,{sym:r(vn,{className:o.text}),def:wt,onInfo:N})]}),!p&&r("p",{className:"text-sm",children:["Standby times for future dates are monthly averages (source:"," ",r("a",{href:`https://www.thrill-data.com/waits/park/${c.id.toLowerCase()}/${n.name.toLowerCase().replaceAll(" ","-")}/`,target:"_blank",rel:"noreferrer",className:"whitespace-nowrap",children:"Thrill Data"}),") meant to assist you in selecting your initial"," ",r("abbr",{title:"Lightning Lanes",children:"LLs"}),". They are not wait time estimates for this particular day."]})]})]})});function ut({name:e,icon:t,onClick:n,className:i}){const s=Y();return r("button",{title:`${e} (more info)`,className:`-mx-2 px-2 ${s.text} ${i}`,onClick:n,children:r(t,{})})}function yo({experience:e,toggleStar:t}){const n=Y();return r("button",{title:`${e.starred?"Remove from":"Add to"} Favorites`,className:"-m-2 p-2",onClick:()=>t(e),children:r(Ps,{className:e.starred?n.text:"text-gray-300"})})}function bo(){return r(z,{title:bt,children:r("p",{children:"When an attraction with a long standby wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"})})}function vo({park:e,experience:t,isBookingToday:n}){const i=ee(),s=ye((t==null?void 0:t.dropTimes)??[])[0],o=i.parks.filter(c=>c.dropTimes.length>0).sort((c,a)=>c===e?-1:a===e?1:0);return r(z,{title:vt,children:[r("p",{children:[t?r("b",{children:t.name}):r(x,{children:"This attraction"})," may be part of"," ",n?s?r(x,{children:["the"," ",r("time",{dateTime:s,className:"font-semibold",children:H(s)})]}):r(x,{children:"an upcoming"}):r(x,{children:"a day-of"})," ","drop of additional Lightning Lane inventory, with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"]}),o.map(c=>{const[a]=ye(c.dropTimes);return r("div",{className:`mt-5 rounded overflow-hidden ${c.theme.bg}`,children:[r("h2",{className:`mt-0 py-1 ${c.theme.bg} text-white text-base text-center`,children:c.name}),r("div",{className:"flex flex-col px-2 pb-3 bg-white bg-opacity-90",children:i.dropExperiences(c).map(l=>{var h;const d=new Set(ye(l.dropTimes??[]));return r("div",{children:[r("h3",{className:"mt-3",children:l.name}),r("ul",{className:"flex flex-wrap gap-y-2 mt-1 leading-tight",children:(h=l.dropTimes)==null?void 0:h.map(u=>{const p=n&&u===a;return r("li",{className:"min-w-[6em] text-center",children:[r("div",{className:`${p?`${c.theme.text} font-bold`:d.has(u)||!n?"font-semibold":"text-gray-500"}`,children:r("time",{dateTime:u,children:H(u)})}),p?r("div",{className:`rounded-sm ${c.theme.bg} text-white text-opacity-90 text-xs font-semibold text-center uppercase`,children:"next"}):null]},u)})})]},l.id)})})]},c.id)})]})}function wo(){return r(z,{title:wt,children:r("p",{children:"You currently have a Lightning Lane reservation for this attraction."})})}/**
 * Exit icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function xo(e){return r(V,{...e,children:r("path",{d:"M12 10v-2h-5v-2h5v-2l3 3zM11 9v4h-5v3l-6-3v-13h11v5h-1v-4h-8l4 2v9h4v-3z"})})}/**
 * News icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function ko(e){return r(V,{...e,children:r("path",{d:"M14 4v-2h-14v11c0 0.552 0.448 1 1 1h13.5c0.828 0 1.5-0.672 1.5-1.5v-8.5h-2zM13 13h-12v-10h12v10zM2 5h10v1h-10zM8 7h4v1h-4zM8 9h4v1h-4zM8 11h3v1h-3zM2 7h5v5h-5z"})})}/**
 * Cog icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function To(e){return r(V,{...e,children:r("path",{d:"M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z"})})}/**
 * User icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function No(e){return r(V,{...e,children:r("path",{d:"M9 11.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"})})}function Io(){const{goTo:e}=G(),[t]=E([{text:"Party Selection",icon:r(No,{}),action:()=>e(r(As,{}))},{text:"Log Out",icon:r(xo,{}),action:()=>X.deleteData()},{text:"BG1 News",icon:r(ko,{}),action:()=>e(r(pr,{}))}]),[n,i]=E(!1),s=oe(null);return r(x,{children:[r("button",{className:"absolute top-0 right-0 h-full px-4",onClick:()=>i(!0),title:"Settings Menu",children:r(To,{})}),n&&r(Mt,{onClick:o=>{var c;(c=s.current)!=null&&c.contains(o.target)||i(!1)},"data-testid":"shade",children:r("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black text-lg font-normal",ref:s,children:t.map(o=>r("li",{className:"border-t-2 first:border-0 border-gray-300",children:r("button",{className:"flex flex-row items-center w-full px-4 py-3",onClick:()=>{i(!1),setTimeout(o.action,50)},children:[r("span",{className:"mr-2.5 text-gray-700","aria-hidden":!0,children:o.icon}),o.text]})},o.text))})})]})}const Eo=(e,t)=>ce(e)-t;function Sn({park:e,onSelect:t}){const{das:n}=B(),{loadData:i,loaderElem:s}=J(),[o,c]=E();L(()=>{i(async()=>{const l=await n.experiences(e);c(l.filter(d=>d.available&&!!d.time).sort((d,h)=>d.name.localeCompare(h.name)))})},[e,n,i]);const a=[{heading:"Attractions",type:"ATTRACTION"},{heading:"Characters",type:"CHARACTER"},{heading:"Entertainment",type:"ENTERTAINMENT"}];return r(z,{title:"Select Experience",theme:e.theme,children:[o?o.length>0?r(x,{children:a.map(l=>r(So,{park:e,experiences:o.filter(d=>d.type===l.type),heading:l.heading,onSelect:t},l.type))}):r("p",{children:"No DAS experiences available"}):null,s]})}function So({park:e,experiences:t,heading:n,onSelect:i}){if(t.length===0)return null;const s=ce(new F().time);return r("div",{className:`mt-4 rounded overflow-hidden ${e.theme.bg}`,children:[r("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:n}),r("ul",{className:"bg-white bg-opacity-90 leading-snug",children:t.map(o=>r("li",{className:"flex items-center pt-3 last:pb-3",children:[r("div",{className:"flex-1 px-2",children:o.name}),r("div",{className:"px-2",children:r(A,{onClick:()=>i(o),children:r("span",{className:"min-w-[4rem]",children:[Eo(o.time,s)," ",r("abbr",{title:"minutes",children:"min."})]})})})]},o.id))})]})}function Dn({park:e,party:t}){const{goTo:n,goBack:i}=G(),s=ee(),{das:o}=B(),{refreshPlans:c}=te(),[a,l]=E(),[d,h]=E(new Set([t.primaryGuest,...t.linkedGuests].slice(0,t.selectionLimit))),[u,p]=E({}),{loadData:m,loaderElem:f}=J();async function g(){a&&m(async()=>{try{const k=await o.book({park:e,experience:a,primaryGuest:t.primaryGuest,guests:[...d]});c(),Xe(s,"D"),await i({screen:fe}),n(r(xe,{booking:k,isNew:!0}))}catch(k){throw k instanceof ar&&p(k.conflicts),k}},{messages:{ConflictsError:"Some guests not eligible",ExperienceUnavailable:"Experience currently unavailable"}})}return r(z,{title:"DAS Selection",theme:e.theme,children:[r("h3",{children:"Experience"}),a?r("div",{className:"flex items-center mt-3",children:[r("div",{className:"text-lg font-semibold truncate",children:a.name}),r("div",{className:"ml-3",children:r(A,{type:"small",onClick:()=>n(r(Sn,{park:e,onSelect:k=>{l(k),i()}})),children:"Change"})})]}):r("div",{className:"mt-3 text-center",children:r(A,{onClick:()=>n(r(Sn,{park:e,onSelect:k=>{l(k),i()}})),children:"Select Experience"})}),r("h3",{children:"DAS Guest"}),r(W,{guests:[t.primaryGuest],conflicts:u}),t.linkedGuests.length>0&&r(x,{children:[r("h3",{children:"Additional Guests"}),r(W,{guests:t.linkedGuests,selectable:{isSelected:k=>d.has(k),onToggle:k=>{d[d.has(k)?"delete":"add"](k),h(new Set(d))},limit:t.selectionLimit-1},conflicts:u})]}),r(K,{disabled:!t||!a,onClick:g,children:"Request Return Time"}),f]})}function Do({parties:e}){const{goTo:t}=G(),{park:n}=de(),{plans:i,refreshPlans:s,loaderElem:o}=te();qe(s,[s]);const c=new Set(e.map(h=>h.primaryGuest.id)),a=new Map(i.filter(h=>Re(h,"DAS","IN_PARK")).map(h=>{var u;return[((u=h.guests.find(p=>c.has(p.id)))==null?void 0:u.id)??"",h]}));if(!o&&e.length===1){const h=e[0],u=a.get(h.primaryGuest.id);return u?r(xe,{booking:u}):r(Dn,{park:n,party:h})}const l=e.filter(h=>!(a!=null&&a.has(h.primaryGuest.id))),d=e.filter(h=>a==null?void 0:a.has(h.primaryGuest.id));return r(z,{title:`DAS ${e.length===1?"Selection":"Parties"}`,theme:n.theme,children:o||(e.length>0?r(x,{children:[l.length>0&&r(x,{children:[r("h3",{children:"Select Next Experience"}),r("ul",{className:"mt-2",children:l.map(h=>r("li",{className:"flex items-center gap-x-3 pl-3 py-1",children:[r("span",{className:"flex-shrink-0 w-[48px] h-[48px] leading-[48px] rounded-full text-3xl font-bold text-center bg-gray-400 text-white","aria-hidden":"true",children:h.primaryGuest.avatarImageUrl?r("img",{src:h.primaryGuest.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):h.primaryGuest.name[0]}),r("span",{className:"flex-1 leading-tight",children:h.primaryGuest.name}),r(A,{type:"small",onClick:()=>t(r(Dn,{park:n,party:h})),children:"Select"})]},h.primaryGuest.id))})]}),d.length>0&&r(x,{children:[r("h3",{children:"Current Selection"}),r("ul",{className:"mt-2",children:d.map(h=>{const u=a.get(h.primaryGuest.id);return r("li",{className:"flex items-center gap-x-3 pl-3 py-1",children:[r("span",{className:"flex-shrink-0 w-[48px] h-[48px] leading-[48px] rounded-full text-3xl font-bold text-center bg-gray-400 text-white","aria-hidden":"true",children:h.primaryGuest.avatarImageUrl?r("img",{src:h.primaryGuest.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):h.primaryGuest.name[0]}),r("div",{className:"flex-1",children:[r("div",{children:h.primaryGuest.name}),u&&r("div",{className:"text-gray-500 text-xs font-semibold uppercase",children:[u.name," @"," ",r(re,{time:u.start.time})]})]}),r(A,{type:"small",onClick:()=>{u&&t(r(xe,{booking:u}))},children:"Details"})]},h.primaryGuest.id)})})]})]}):r("div",{}))})}function Co({contentRef:e}){const{goTo:t}=G(),{experiences:n,refreshExperiences:i,loaderElem:s}=Ke(),o=yr();return r($t,{title:"Times Guide",buttons:r(x,{children:[o.length>0&&r(A,{title:"Disability Access Service",onClick:()=>t(r(Do,{parties:o})),children:"DAS"}),r(Hr,{}),r(Me,{name:"Times",onClick:i})]}),contentRef:e,children:[r(Po,{experiences:n}),s]})}const Po=Et(function({experiences:t}){const{goTo:n}=G(),i=o=>n(r(Lo,{exp:o})),s=new Map;return t.filter(o=>{var c;return o.standby.available||o.standby.unavailableReason==="TEMPORARILY_DOWN"||((c=o.individual)==null?void 0:c.available)||o.virtualQueue}).sort((o,c)=>o.land.sort-c.land.sort||o.name.localeCompare(c.name)).forEach(o=>{var c,a;s.has(o.land)||s.set(o.land,{ATTRACTION:[],ENTERTAINMENT:[],CHARACTER:[],HOLIDAY:[]}),(a=(c=s.get(o.land))==null?void 0:c[o.type])==null||a.push(o)}),r(x,{children:[[...s].map(([o,c])=>r("div",{children:[r("h2",{className:`pr-1 ${o.theme.text} text-sm font-semibold text-right uppercase`,children:o.name}),r("div",{className:"rounded overflow-hidden",children:[r(Fe,{title:"Attractions",land:o,experiences:c.ATTRACTION,onInfoClick:i}),r(Fe,{title:"Entertainment",land:o,experiences:c.ENTERTAINMENT,onInfoClick:i}),r(Fe,{title:"Holiday Entertainment",land:o,experiences:c.HOLIDAY,onInfoClick:i}),r(Fe,{title:"Characters",land:o,experiences:c.CHARACTER,onInfoClick:i})]})]},o.name)),t.length>0&&r(Fr,{children:[r(be,{sym:"*",def:"No posted wait/show time"}),r(be,{sym:"\u274C",def:"Temporarily down"}),r(be,{sym:"VQ",def:"Virtual queue"})]})]})});function Fe({title:e,land:t,experiences:n,onInfoClick:i}){return n.length===0?null:r("div",{className:`${t.theme.bg}`,"data-testid":`${t.name}-${e}`,children:[r("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:e}),r("table",{className:"w-full leading-snug",children:r("tbody",{children:n.map(s=>{var o,c;return r("tr",{className:"group",children:[r("td",{className:`${s.standby.nextShowTime?"min-w-[5.625rem]":"min-w-[2.75rem]"} px-2 py-0.5 group-first:pt-1 group-last:pb-1 bg-white bg-opacity-80 font-bold text-center uppercase whitespace-nowrap`,children:s.standby.nextShowTime?(((o=s.additionalShowTimes)==null?void 0:o.length)??0)>0?r("button",{onClick:()=>i(s),className:"underline",children:H(s.standby.nextShowTime)}):H(s.standby.nextShowTime):s.standby.available?s.standby.waitTime??"*":s.virtualQueue&&s.standby.unavailableReason==="NOT_STANDBY_ENABLED"?"VQ":"\u274C"}),r("td",{className:"w-full px-1 pl-2 py-0.5 group-first:pt-1 group-last:pb-1 bg-white bg-opacity-90",children:r("div",{className:"flex items-center gap-x-2",children:[r("div",{className:`flex-1 ${(s.avgWait??0)>=s.park.waitThreshold||s.virtualQueue&&((c=s.standby)!=null&&c.waitTime)?`font-bold ${t.theme.text}`:""}`,children:s.name}),(s==null?void 0:s.individual)&&r("div",{className:`${t.theme.text} text-xs leading-tight font-semibold text-center uppercase`,children:[r("div",{children:[r("abbr",{title:"Lightning Lane",children:"LL"}),": "+s.individual.displayPrice]}),s.individual.nextAvailableTime&&r("div",{children:H(s.individual.nextAvailableTime)})]})]})})]},s.id)})})})]})}const Lo=({exp:e})=>{var t;return r(z,{title:"Experience Info",children:[r("h2",{children:e.name}),r("div",{children:e.park.name}),r("h3",{children:["Upcoming ",e.type==="CHARACTER"?"Appearances":"Shows"]}),r("ul",{className:"list-disc mt-2 pl-6",children:[!!e.standby.nextShowTime&&r("li",{children:H(e.standby.nextShowTime)}),(t=e.additionalShowTimes)==null?void 0:t.map(n=>r("li",{children:H(n)},n))]})]})},Cn=6e4,Vr=["bg1","tab"],Ao=()=>$.get(Vr)??"LL",Ro=[{name:"LL",icon:r(yt,{}),component:_o},{name:"Times",icon:r(Cs,{}),component:Co},{name:"Plans",icon:r(Sr,{}),component:Br}],Mo=r(Io,{}),fe=Ds({tabs:Ro,footer:Mo},({tab:e})=>{const{current:t}=hr(),n=ue(),{park:i}=de(),{refreshExperiences:s}=Ke(),{refreshPlans:o}=te(),c=oe(null);return L(()=>{$.set(Vr,e.name)},[e]),L(()=>At(()=>{t.type===fe&&(s(Cn),o(Cn))}),[t,s,o]),L(()=>{var a;n.current&&((a=c.current)==null||a.scroll(0,0))},[n]),r(ir,{value:i.theme,children:r(e.component,{contentRef:c})})});function $o(){return r(_s,{children:r(ks,{children:r(fs,{children:r(Ns,{children:r(Is,{children:r(Es,{children:r(mr,{children:r(fe,{tabName:Ao()})})})})})})})})}const Oo=500,Pn=100,Bo=5,Go=5*6e4;let qr=0,ze=0;const Ln=()=>Date.now()+qr;class Uo extends Error{constructor(){super(...arguments);P(this,"name","SyncFailed")}}async function Fo(){if(Date.now()-ze<Go)return;const e=ze;ze=Date.now();let t=Pn+1;try{const n=[];for(let i=0;i<Bo;++i){try{const s=await zo();Number.isInteger(s)&&n.push(s)}catch(s){console.error(s);continue}if(!(n.length<2)){n.sort((s,o)=>s-o);for(const[s,o]of n.slice(0,-1).entries()){const c=n[s+1],a=Math.abs(o-c);a<t&&(t=a,qr=Math.round((o+c)/2))}if(t<=Pn)return}}throw new Uo}catch(n){throw ze=e,n}}async function zo(){const e=Date.now(),{headers:t}=await fetch("https://bg1.joelface.com/t"),n=Date.now();if(n-e>Oo)return NaN;const s=parseFloat(String(t==null?void 0:t.get("T")))*1e3;return Math.round(s-(e+n)/2)}const Ho=50;function Wo({onSync:e}){const[t,n]=E(Ln());return L(()=>{const i=setInterval(()=>n(Ln()),Ho);return()=>clearInterval(i)},[]),L(()=>{Fo().then(()=>e(!0)).catch(()=>e(!1))},[e]),r("time",{children:new F(t).time})}function jo({time:e,label:t}){const[n,i]=E(!0);return r("table",{className:"mt-4 mx-auto text-gray-500",children:r("tbody",{children:[r(An,{heading:t,time:r("time",{children:e||"--:--:--"})}),r(An,{heading:"Current time",time:r(x,{children:[r(Wo,{onSync:i}),!n&&r("span",{className:"text-sm font-sans font-semibold text-red-600",children:[" ","(unsynced)"]})]})})]})})}function An({heading:e,time:t}){return r("tr",{children:[r("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase",children:[e,":"]}),r("td",{className:"text-xl font-mono leading-tight",children:["\uFEFF",t]})]})}function Ut({queue:e,title:t,children:n}){var i;return r(z,{title:t,theme:(i=e.park)==null?void 0:i.theme,children:[r("h2",{children:e.name}),n]})}const Yo=5e3;function Vo({queue:e,guests:t,result:n}){const{boardingGroup:i,conflicts:s}=n,o=i!==null,c=t.filter(u=>!(u.id in s)),a=t.filter(u=>u.id in s),{goBack:l}=G(),[d,h]=E(!1);return L(()=>{o&&setTimeout(()=>h(!0),Yo)},[o]),r(Ut,{queue:e,title:"Boarding Group",children:o?r(x,{children:[r("h3",{children:"Congratulations! \u{1F389}"}),r("p",{children:"You joined the virtual queue!"}),r("p",{className:"text-lg font-semibold",children:["Boarding Group: ",i]}),r(W,{guests:c}),Object.keys(s).length>0&&r(x,{children:[r("p",{className:"font-semibold",children:"These guests could not join:"}),r(W,{guests:a,conflicts:s})]}),r("p",{children:"Refer to the My Disney Experience app for return time and other information."}),d&&r(K,{onClick:()=>l({screen:Qr}),children:"Done"})]}):r(x,{children:[r("h3",{children:"Sorry!"}),r("p",{children:"A boarding group could not be obtained. Go back and try again."}),r(W,{guests:a,conflicts:s})]})})}function qo({queue:e,guests:t}){const{goTo:n}=G(),i=ee(),{vq:s}=B(),{loadData:o,loaderElem:c}=J();async function a(){await o(async l=>{const d=await s.getQueue(e);if(!d.isAcceptingJoins)return l(d.isAcceptingPartyCreation?"Queue not open yet":"No boarding groups available");const h=await s.joinQueue(e,t);n(r(Vo,{queue:e,guests:t,result:h}),{replace:!0}),h.boardingGroup!==null&&Xe(i,"V")},{minLoadTime:999})}return r(Ut,{queue:e,title:"Virtual Queue",children:[e.isAcceptingJoins?r("p",{children:"The virtual queue is open. Join now!"}):e.nextScheduledOpenTime?r(x,{children:[r(jo,{time:e.nextScheduledOpenTime,label:"Next queue opening"}),r("p",{children:["Tap the ",r("b",{children:"Join Virtual Queue"})," button when the clock reads"," ",r("time",{className:"font-semibold",children:e.nextScheduledOpenTime}),". The queue can fill up almost instantly, so be quick!"]})]}):null,r("h3",{children:"Your Party"}),r(W,{guests:t}),r(K,{onClick:a,children:"Join Virtual Queue"}),c]})}function Qo({queue:e}){const{goTo:t}=G(),{vq:n}=B(),{loadData:i,loaderElem:s}=J(),[o,c]=E([]),[a,l]=E(new Set);L(()=>{i(async()=>{const h=await n.getLinkedGuests(e);c(h),l(new Set(h.filter(u=>u.preselected)))})},[e,n,i]);function d(h){a[a.has(h)?"delete":"add"](h),l(new Set(a))}return r(Ut,{queue:e,title:"Choose Your Party",children:[r("p",{children:["Select everyone in your party who would like to experience this attraction, and tap the ",r("b",{children:"Confirm Party"})," button."]}),r("h3",{children:"Your Party"}),o.length>0?r(W,{guests:o,selectable:{isSelected:h=>a.has(h),onToggle:d,limit:e.maxPartySize}}):r("p",{children:"No guests available"}),r(K,{disabled:a.size===0,onClick:()=>t(r(qo,{queue:e,guests:[...a]})),children:"Confirm Party"}),s]})}const Rn=e=>e.categoryContentId==="attraction",He=e=>e.isAcceptingPartyCreation||e.isAcceptingJoins;function Qr(){const{vq:e}=B(),{goTo:t}=G(),n=Y(),{loadData:i,loaderElem:s}=J(),[o,c]=E(),a=j(()=>{i(async()=>{c((await e.getQueues()).sort((l,d)=>+He(d)-+He(l)||+Rn(d)-+Rn(l)))})},[e,i]);return L(()=>(a(),At(a)),[a]),r(z,{title:"Virtual Queues",buttons:r(A,{title:"Refresh Queues",onClick:a,children:r(Rt,{})}),footer:r("div",{className:"p-2 text-right",children:r(A,{className:`bg-opacity-90 bg-white ${n.text}`,onClick:()=>X.deleteData(),children:"Log Out"})}),children:[o?o.length>0?r("ul",{className:"mt-1",children:o.map(l=>r("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",children:[r("h2",{className:"mt-0",children:l.name}),r("div",{className:"flex items-center mt-2",children:[r("div",{className:"flex-1",children:l.isAcceptingJoins?r("span",{children:"Available now"}):l.nextScheduledOpenTime?r(x,{children:["Next opening:"," ",r("time",{dateTime:l.nextScheduledOpenTime,className:"font-semibold",children:H(l.nextScheduledOpenTime)})]}):"No more openings today"}),r("div",{className:"pl-3",children:r(A,{disabled:!He(l),onClick:()=>t(r(Qo,{queue:l})),children:He(l)?"Join Queue":"Closed"})})]})]},l.id))}):!s&&r("p",{className:"text-gray-500 font-semibold text-center uppercase",children:"No virtual queues found"}):null,s]})}function Ko(){return r(mr,{children:r(Qr,{})})}const Jo=0;function Xo(){document.body.addEventListener("click",()=>null)}function Zo(){const[e,t]=E(),[n,i]=E(r("div",{})),s=as(),o=ls(Jo),[c,a]=E(()=>{try{X.getData()}catch(l){if(!(l instanceof er))throw l;return!0}return!1});return L(()=>{Xo()},[]),L(()=>{X.onUnauthorized=()=>a(!0),(async()=>{for(const[l,d]of[[Pt,$o],[Lt,Ko]])try{const h=await Oi(l.originToResortId(origin));t(h),F.setTimeZone({WDW:"America/New_York",DLR:"America/Los_Angeles"}[h.id]),i(r(Zi,{value:h,children:r(Ji,{value:Xi(h),children:r(d,{})})}));return}catch(h){if(!(h instanceof nr))throw h}location.assign("https://joelface.github.io/bg1/start.html")})()},[]),L(()=>{function l(){if(!c)try{X.getData(),a(!1)}catch{a(!0)}}return l(),At(l)},[c]),s||o||c&&e&&r(ms,{resort:e,onLogin:l=>{X.setData(l),a(!1)}})||n}Kr();function Kr(){if(!document.body){setTimeout(Kr,100);return}document.close(),ea(),ta(),na().render(r(Zo,{}))}function ea(){const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(e)}function ta(){const e=document.createElement("link");e.rel="icon",e.href="data:,",document.head.appendChild(e)}function na(){return Ti(document.body.appendChild(document.createElement("div")))}
